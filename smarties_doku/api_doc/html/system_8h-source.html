<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>Smarties2: system.h Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.5 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="classes.html"><span>Data&nbsp;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    <li>
      <form action="search.php" method="get">
        <table cellspacing="0" cellpadding="0" border="0">
          <tr>
            <td><label>&nbsp;<u>S</u>earch&nbsp;for&nbsp;</label></td>
            <td><input type="text" name="query" value="" size="20" accesskey="s"/></td>
          </tr>
        </table>
      </form>
    </li>
    </ul>
  </div>
<h1>system.h</h1><a href="system_8h.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 
<a name="l00017"></a>00017 <span class="preprocessor">#ifndef SYSTEM_H_</span>
<a name="l00018"></a>00018 <span class="preprocessor"></span><span class="preprocessor">#define SYSTEM_H_</span>
<a name="l00019"></a>00019 <span class="preprocessor"></span>
<a name="l00020"></a>00020 <span class="preprocessor">#include &lt;avr/io.h&gt;</span>
<a name="l00021"></a>00021 
<a name="l00022"></a>00022 <span class="comment">/* way of color detection */</span>
<a name="l00023"></a>00023 <span class="preprocessor">#define DISTANCE_DETECTION          1 </span>
<a name="l00024"></a>00024 <span class="preprocessor"></span><span class="preprocessor">#define DISTANCE_NORM_DETECTION     0</span>
<a name="l00025"></a>00025 <span class="preprocessor"></span><span class="preprocessor">#define TABLE_REFERENCE_DETECTION   0</span>
<a name="l00026"></a>00026 <span class="preprocessor"></span>
<a name="l00027"></a>00027 
<a name="l00028"></a>00028 <span class="comment">// CPU Frequency</span>
<a name="l00029"></a>00029 <span class="preprocessor">#ifndef F_CPU</span>
<a name="l00030"></a>00030 <span class="preprocessor"></span><span class="preprocessor">#define F_CPU 16000000</span>
<a name="l00031"></a>00031 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
<a name="l00032"></a>00032 <span class="preprocessor"></span>
<a name="l00033"></a>00033 <span class="comment">// COLOR SENSOR ADJD-S371 is a digital color sensor with own light source</span>
<a name="l00034"></a><a class="code" href="system_8h.html#fe700fed52d70c6169dab636495b30cb">00034</a> <span class="preprocessor">#define COL_SENS_ADJD_LED_PORT  PORTA   </span>
<a name="l00035"></a>00035 <span class="preprocessor">#define COL_SENS_ADJD_LED_PIN   PINA</span>
<a name="l00036"></a>00036 <span class="preprocessor"></span><span class="preprocessor">#define COL_SENS_ADJD_LED_DDR   DDRA</span>
<a name="l00037"></a><a class="code" href="system_8h.html#25d54d0c7a0e83e94da7d445f46570a5">00037</a> <span class="preprocessor"></span><span class="preprocessor">#define COL_SENS_ADJD_LED_BIT   PA0     </span>
<a name="l00038"></a>00038 <span class="preprocessor"></span>
<a name="l00039"></a><a class="code" href="system_8h.html#3699b3cd0f505e9b137063a54335bfa1">00039</a> <span class="preprocessor"></span><span class="preprocessor">#define COL_SENS_ADJD_LED_ON        \</span>
<a name="l00040"></a>00040 <span class="preprocessor">    (COL_SENS_ADJD_LED_PORT |= (1&lt;&lt;COL_SENS_ADJD_LED_BIT))  </span>
<a name="l00041"></a><a class="code" href="system_8h.html#c3ebb4b4b2116ee40a62eb554aa21a65">00041</a> <span class="preprocessor">#define COL_SENS_ADJD_LED_OFF       \</span>
<a name="l00042"></a>00042 <span class="preprocessor">    (COL_SENS_ADJD_LED_PORT &amp;= ~(1&lt;&lt;COL_SENS_ADJD_LED_BIT)) </span>
<a name="l00043"></a>00043 <span class="preprocessor"></span>
<a name="l00044"></a>00044 <span class="preprocessor"></span><span class="preprocessor">#define COL_SENS_ADJD_DEVICE_ADDRESS    0x23</span>
<a name="l00045"></a>00045 <span class="preprocessor"></span>
<a name="l00046"></a>00046 <span class="comment">//COLOR SENSOR ADJD i2c commands, registers, bits</span>
<a name="l00047"></a>00047 <span class="preprocessor">#define ADJD_REG_CTRL               0</span>
<a name="l00048"></a>00048 <span class="preprocessor"></span><span class="preprocessor">#define ADJD_REG_CONFIG             1</span>
<a name="l00049"></a>00049 <span class="preprocessor"></span><span class="preprocessor">#define ADJD_REG_CAP_RED            6</span>
<a name="l00050"></a>00050 <span class="preprocessor"></span><span class="preprocessor">#define ADJD_REG_CAP_GREEN          7</span>
<a name="l00051"></a>00051 <span class="preprocessor"></span><span class="preprocessor">#define ADJD_REG_CAP_BLUE           8</span>
<a name="l00052"></a>00052 <span class="preprocessor"></span><span class="preprocessor">#define ADJD_REG_CAP_CLEAR          9</span>
<a name="l00053"></a>00053 <span class="preprocessor"></span><span class="preprocessor">#define ADJD_REG_INT_RED_LO         10</span>
<a name="l00054"></a>00054 <span class="preprocessor"></span><span class="preprocessor">#define ADJD_REG_INT_RED_HI         11</span>
<a name="l00055"></a>00055 <span class="preprocessor"></span><span class="preprocessor">#define ADJD_REG_INT_GREEN_LO       12</span>
<a name="l00056"></a>00056 <span class="preprocessor"></span><span class="preprocessor">#define ADJD_REG_INT_GREEN_HI       13</span>
<a name="l00057"></a>00057 <span class="preprocessor"></span><span class="preprocessor">#define ADJD_REG_INT_BLUE_LO        14</span>
<a name="l00058"></a>00058 <span class="preprocessor"></span><span class="preprocessor">#define ADJD_REG_INT_BLUE_HI        15</span>
<a name="l00059"></a>00059 <span class="preprocessor"></span><span class="preprocessor">#define ADJD_REG_INT_CLEAR_LO       16</span>
<a name="l00060"></a>00060 <span class="preprocessor"></span><span class="preprocessor">#define ADJD_REG_INT_CLEAR_HI       17</span>
<a name="l00061"></a>00061 <span class="preprocessor"></span>
<a name="l00062"></a>00062 
<a name="l00063"></a>00063 <span class="comment">// COLOR SENSOR TCSS230 works with an clock output and color filters</span>
<a name="l00064"></a><a class="code" href="system_8h.html#72bd6b1b90c0b2cace1b59d1d37eba9b">00064</a> <span class="preprocessor">#define COL_SENS_TCS_IN_PORT        PORTD       </span>
<a name="l00065"></a>00065 <span class="preprocessor">#define COL_SENS_TCS_IN_DDR         DDRD</span>
<a name="l00066"></a><a class="code" href="system_8h.html#e24fa8c813ba3c4f6c02d5fd5a200463">00066</a> <span class="preprocessor"></span><span class="preprocessor">#define COL_SENS_TCS_IN_ICP         PD2         </span>
<a name="l00067"></a>00067 <span class="preprocessor"></span>
<a name="l00068"></a><a class="code" href="system_8h.html#a8ffd0a647c334c819bcd91a2499f60e">00068</a> <span class="preprocessor"></span><span class="preprocessor">#define COL_SENS_TCS_OUT_PORT       PORTA       </span>
<a name="l00069"></a>00069 <span class="preprocessor">#define COL_SENS_TCS_OUT_DDR        DDRA</span>
<a name="l00070"></a><a class="code" href="system_8h.html#1ed96e7f4e313c742f8a6604d6e9c331">00070</a> <span class="preprocessor"></span><span class="preprocessor">#define COL_SENS_TCS_S2_BIT         PA7         </span>
<a name="l00071"></a><a class="code" href="system_8h.html#ad84f5270142dbe12dce5626101351b4">00071</a> <span class="preprocessor">#define COL_SENS_TCS_S0_BIT         PA6         </span>
<a name="l00072"></a><a class="code" href="system_8h.html#145e39d28a89b141fe6d749a50e56997">00072</a> <span class="preprocessor">#define COL_SENS_TCS_S3_BIT         PA5         </span>
<a name="l00073"></a><a class="code" href="system_8h.html#ee5c1a578211a66abdaba33b404bb7ca">00073</a> <span class="preprocessor">#define COL_SENS_TCS_S1_BIT         PA4         </span>
<a name="l00074"></a><a class="code" href="system_8h.html#9d219bdbdc5ab752f2b4ee94dd595d01">00074</a> <span class="preprocessor">#define COL_SENS_TCS_OE_BIT         PA3         </span>
<a name="l00075"></a>00075 <span class="preprocessor"></span>
<a name="l00076"></a><a class="code" href="system_8h.html#293abcb660a47e6482b3ae3438f3e0d6">00076</a> <span class="preprocessor"></span><span class="preprocessor">#define COL_SENS_TCS_SAMPLE_TIME    30          </span>
<a name="l00077"></a>00077 <span class="preprocessor"></span>
<a name="l00078"></a><a class="code" href="system_8h.html#884961369c1f5d90cf5a4efcf1d09c60">00078</a> <span class="preprocessor"></span><span class="preprocessor">#define COL_SENS_TCS_ENABLE         \</span>
<a name="l00079"></a>00079 <span class="preprocessor">    (COL_SENS_TCS_OUT_PORT &amp;= ~(1&lt;&lt;COL_SENS_TCS_OE_BIT))    </span>
<a name="l00080"></a><a class="code" href="system_8h.html#0572adf4723a8192e65be4da7c4ef038">00080</a> <span class="preprocessor">#define COL_SENS_TCS_DISABLE        \</span>
<a name="l00081"></a>00081 <span class="preprocessor">    (COL_SENS_TCS_OUT_PORT |= (1&lt;&lt;COL_SENS_TCS_OE_BIT))     </span>
<a name="l00082"></a><a class="code" href="system_8h.html#e28f6f5c6ab141b35f5c261c4e1a6a64">00082</a> <span class="preprocessor">#define COL_SENS_TCS_FREQ_MESURE_EN (GICR |= (1&lt;&lt;INT0))     </span>
<a name="l00083"></a><a class="code" href="system_8h.html#d29eb3cdd6f0045dff5ab342c2f0e5b7">00083</a> <span class="preprocessor">#define COL_SENS_TCS_FREQ_MESURE_DI (GICR &amp;= ~(1&lt;&lt;INT0))    </span>
<a name="l00084"></a>00084 <span class="preprocessor"></span>
<a name="l00085"></a>00085 <span class="preprocessor"></span>
<a name="l00092"></a><a class="code" href="system_8h.html#292208f07db7275c1421a4b013088be8">00092</a> <span class="preprocessor">#define COL_SENS_TCS_SET_FREQ_SCALE(percentage)                 \</span>
<a name="l00093"></a>00093 <span class="preprocessor">    do {                                                        \</span>
<a name="l00094"></a>00094 <span class="preprocessor">        COL_SENS_TCS_OUT_PORT &amp;= ~(1&lt;&lt;COL_SENS_TCS_S1_BIT);     \</span>
<a name="l00095"></a>00095 <span class="preprocessor">        COL_SENS_TCS_OUT_PORT &amp;= ~(1&lt;&lt;COL_SENS_TCS_S0_BIT);     \</span>
<a name="l00096"></a>00096 <span class="preprocessor">        if (percentage == 2) {                                  \</span>
<a name="l00097"></a>00097 <span class="preprocessor">            COL_SENS_TCS_OUT_PORT |= (1&lt;&lt;COL_SENS_TCS_S1_BIT);  \</span>
<a name="l00098"></a>00098 <span class="preprocessor">        }                                                       \</span>
<a name="l00099"></a>00099 <span class="preprocessor">        else if (percentage == 20) {                            \</span>
<a name="l00100"></a>00100 <span class="preprocessor">            COL_SENS_TCS_OUT_PORT |= (1&lt;&lt;COL_SENS_TCS_S0_BIT);  \</span>
<a name="l00101"></a>00101 <span class="preprocessor">        }                                                       \</span>
<a name="l00102"></a>00102 <span class="preprocessor">        else if (percentage == 100) {                           \</span>
<a name="l00103"></a>00103 <span class="preprocessor">            COL_SENS_TCS_OUT_PORT |= (1&lt;&lt;COL_SENS_TCS_S0_BIT);  \</span>
<a name="l00104"></a>00104 <span class="preprocessor">            COL_SENS_TCS_OUT_PORT |= (1&lt;&lt;COL_SENS_TCS_S1_BIT);  \</span>
<a name="l00105"></a>00105 <span class="preprocessor">        }                                                       \</span>
<a name="l00106"></a>00106 <span class="preprocessor">    } while (0)</span>
<a name="l00107"></a>00107 <span class="preprocessor"></span>
<a name="l00116"></a><a class="code" href="system_8h.html#efde5a442c1bd97a8ec8ac0bb819d58e">00116</a> <span class="preprocessor">#define COL_SENS_TCS_SET_FILTER(color)                          \</span>
<a name="l00117"></a>00117 <span class="preprocessor">    do {                                                        \</span>
<a name="l00118"></a>00118 <span class="preprocessor">        if (color == col_red) {                                 \</span>
<a name="l00119"></a>00119 <span class="preprocessor">            COL_SENS_TCS_OUT_PORT &amp;= ~(1&lt;&lt;COL_SENS_TCS_S2_BIT); \</span>
<a name="l00120"></a>00120 <span class="preprocessor">            COL_SENS_TCS_OUT_PORT &amp;= ~(1&lt;&lt;COL_SENS_TCS_S3_BIT); \</span>
<a name="l00121"></a>00121 <span class="preprocessor">        }                                                       \</span>
<a name="l00122"></a>00122 <span class="preprocessor">        else if (color == col_blue) {                           \</span>
<a name="l00123"></a>00123 <span class="preprocessor">            COL_SENS_TCS_OUT_PORT &amp;= ~(1&lt;&lt;COL_SENS_TCS_S2_BIT); \</span>
<a name="l00124"></a>00124 <span class="preprocessor">            COL_SENS_TCS_OUT_PORT |= (1&lt;&lt;COL_SENS_TCS_S3_BIT);  \</span>
<a name="l00125"></a>00125 <span class="preprocessor">        }                                                       \</span>
<a name="l00126"></a>00126 <span class="preprocessor">        else if (color == col_green) {                          \</span>
<a name="l00127"></a>00127 <span class="preprocessor">            COL_SENS_TCS_OUT_PORT |= (1&lt;&lt;COL_SENS_TCS_S2_BIT);  \</span>
<a name="l00128"></a>00128 <span class="preprocessor">            COL_SENS_TCS_OUT_PORT |= (1&lt;&lt;COL_SENS_TCS_S3_BIT);  \</span>
<a name="l00129"></a>00129 <span class="preprocessor">        }                                                       \</span>
<a name="l00130"></a>00130 <span class="preprocessor">        else if (color == col_unknown) {                        \</span>
<a name="l00131"></a>00131 <span class="preprocessor">            COL_SENS_TCS_OUT_PORT |= (1&lt;&lt;COL_SENS_TCS_S2_BIT);  \</span>
<a name="l00132"></a>00132 <span class="preprocessor">            COL_SENS_TCS_OUT_PORT &amp;= ~(1&lt;&lt;COL_SENS_TCS_S3_BIT); \</span>
<a name="l00133"></a>00133 <span class="preprocessor">        }                                                       \</span>
<a name="l00134"></a>00134 <span class="preprocessor">    } while (0)</span>
<a name="l00135"></a>00135 <span class="preprocessor"></span>
<a name="l00136"></a>00136 <span class="comment">// STEPPER MOTORS</span>
<a name="l00137"></a><a class="code" href="system_8h.html#1c32ae2c93f13130dab34427bfed4bf1">00137</a> <span class="preprocessor">#define STEPPER_PORT        PORTD       </span>
<a name="l00138"></a>00138 <span class="preprocessor">#define STEPPER_DDR         DDRD</span>
<a name="l00139"></a>00139 <span class="preprocessor"></span><span class="preprocessor">#define STEPPER_PIN         PIND</span>
<a name="l00140"></a>00140 <span class="preprocessor"></span>
<a name="l00141"></a><a class="code" href="system_8h.html#5f928be89b18a571ee40aa3d48d03116">00141</a> <span class="preprocessor">#define REV_BIT_EN          PD7         </span>
<a name="l00142"></a><a class="code" href="system_8h.html#55076b0e8da94b0116fac34c00beb3ec">00142</a> <span class="preprocessor">#define REV_BIT_CW          PD6         </span>
<a name="l00143"></a><a class="code" href="system_8h.html#b126037141bc11723ac7892f0f8323f1">00143</a> <span class="preprocessor">#define REV_BIT_CLK         PD5         </span>
<a name="l00144"></a>00144 <span class="preprocessor"></span>
<a name="l00145"></a>00145 <span class="preprocessor"></span>
<a name="l00148"></a><a class="code" href="system_8h.html#38e0155b1d66a9e8135bbfddf56ffef4">00148</a> <span class="preprocessor">#define REV_MOVE_STEP                           \</span>
<a name="l00149"></a>00149 <span class="preprocessor">    do {                                        \</span>
<a name="l00150"></a>00150 <span class="preprocessor">        STEPPER_PORT &amp;= ~(1&lt;&lt;REV_BIT_CLK);      \</span>
<a name="l00151"></a>00151 <span class="preprocessor">        STEPPER_PORT |= (1&lt;&lt;REV_BIT_CLK);       \</span>
<a name="l00152"></a>00152 <span class="preprocessor">} while (0)</span>
<a name="l00153"></a><a class="code" href="system_8h.html#94ba27b8711c066bedb56c5a2290f372">00153</a> <span class="preprocessor"></span><span class="preprocessor">#define REV_ENABLE          (STEPPER_PORT |= (1&lt;&lt;REV_BIT_EN))   </span>
<a name="l00154"></a><a class="code" href="system_8h.html#67839faa4915b278dcac966586cdc3bf">00154</a> <span class="preprocessor">#define REV_DISABLE         (STEPPER_PORT &amp;= ~(1&lt;&lt;REV_BIT_EN))  </span>
<a name="l00155"></a><a class="code" href="system_8h.html#425bb595f11b1bc63de43add0e4da559">00155</a> <span class="preprocessor">#define REV_SET_CW          (STEPPER_PORT &amp;= ~(1&lt;&lt;REV_BIT_CW))  </span>
<a name="l00156"></a><a class="code" href="system_8h.html#f73e2419556ce34395c0d241e34ee57c">00156</a> <span class="preprocessor">#define REV_SET_CCW         (STEPPER_PORT |= (1&lt;&lt;REV_BIT_CW))   </span>
<a name="l00157"></a>00157 <span class="preprocessor"></span>
<a name="l00158"></a>00158 <span class="preprocessor"></span>
<a name="l00159"></a><a class="code" href="system_8h.html#a2e7a288930ea3e5c40dd46d9710c3c4">00159</a> <span class="preprocessor">#define REV_STEP_DURATION   20          </span>
<a name="l00160"></a><a class="code" href="system_8h.html#16f46929c8f14df1763fdaab4f10a51d">00160</a> <span class="preprocessor">#define REV_RAMP_DURATION   1           </span>
<a name="l00161"></a><a class="code" href="system_8h.html#388331d885423f07d4a701af481c62a7">00161</a> <span class="preprocessor">#define REV_MAX_SIZE        12          </span>
<a name="l00162"></a><a class="code" href="system_8h.html#f0bdf5d3d7484b99405ef9f1373d8786">00162</a> <span class="preprocessor">#define REV_STEPS_ESTIMATED 5           </span>
<a name="l00163"></a>00163 <span class="preprocessor">#define REV_PAUSE_DURATION  500</span>
<a name="l00164"></a>00164 <span class="preprocessor"></span>
<a name="l00165"></a>00165 <span class="comment">//#define REV_POS_SENS1         11</span>
<a name="l00166"></a>00166 <span class="comment">//#define REV_POS_SENS2         1</span>
<a name="l00167"></a>00167 <span class="preprocessor">#define REV_POS_SMARTIE_OUT     3</span>
<a name="l00168"></a>00168 <span class="preprocessor"></span><span class="preprocessor">#define REV_POS_SMARTIE_IN      0</span>
<a name="l00169"></a>00169 <span class="preprocessor"></span>
<a name="l00170"></a>00170 <span class="comment">// Stepper motor for catcher</span>
<a name="l00171"></a><a class="code" href="system_8h.html#feccc73a66450b37b491e3c99faf0c7d">00171</a> <span class="preprocessor">#define CATCH_BIT_EN        PD4         </span>
<a name="l00172"></a><a class="code" href="system_8h.html#00efedd21f0d97282f01ae9ae195f079">00172</a> <span class="preprocessor">#define CATCH_BIT_CW        PD1         </span>
<a name="l00173"></a><a class="code" href="system_8h.html#9a1577ffdcbfbdcc8d5522664d4f1f4e">00173</a> <span class="preprocessor">#define CATCH_BIT_CLK       PD0         </span>
<a name="l00174"></a>00174 <span class="preprocessor"></span>
<a name="l00175"></a>00175 <span class="preprocessor"></span>
<a name="l00178"></a><a class="code" href="system_8h.html#797c4788553e1516bc35e28ea1cc2faa">00178</a> <span class="preprocessor">#define CATCH_MOVE_STEP                         \</span>
<a name="l00179"></a>00179 <span class="preprocessor">    do {                                        \</span>
<a name="l00180"></a>00180 <span class="preprocessor">        STEPPER_PORT &amp;= ~(1&lt;&lt;CATCH_BIT_CLK);    \</span>
<a name="l00181"></a>00181 <span class="preprocessor">        STEPPER_PORT |= (1&lt;&lt;CATCH_BIT_CLK);     \</span>
<a name="l00182"></a>00182 <span class="preprocessor">} while (0)</span>
<a name="l00183"></a><a class="code" href="system_8h.html#cbb9435cdc9b7d2ea5c42461635ca74b">00183</a> <span class="preprocessor"></span><span class="preprocessor">#define CATCH_ENABLE        (STEPPER_PORT |= (1&lt;&lt;CATCH_BIT_EN))     </span>
<a name="l00184"></a><a class="code" href="system_8h.html#dbaa422e514d133a6254ba84cbd1c656">00184</a> <span class="preprocessor">#define CATCH_DISABLE       (STEPPER_PORT &amp;= ~(1&lt;&lt;CATCH_BIT_EN))    </span>
<a name="l00185"></a><a class="code" href="system_8h.html#311c8a4afc44185e65430c85b69fedf1">00185</a> <span class="preprocessor">#define CATCH_SET_CW        (STEPPER_PORT &amp;= ~(1&lt;&lt;CATCH_BIT_CW))    </span>
<a name="l00186"></a><a class="code" href="system_8h.html#21ad09fcf32817d8bb26815508095084">00186</a> <span class="preprocessor">#define CATCH_SET_CCW       (STEPPER_PORT |= (1&lt;&lt;CATCH_BIT_CW)) </span>
<a name="l00187"></a>00187 <span class="preprocessor"></span>
<a name="l00188"></a><a class="code" href="system_8h.html#09bccded49054a78a07e0d63439e9963">00188</a> <span class="preprocessor"></span><span class="preprocessor">#define CATCH_STEP_DURATION     10          </span>
<a name="l00189"></a><a class="code" href="system_8h.html#6ef7e4171ad6c94755cb69dfb84ee6e6">00189</a> <span class="preprocessor">#define CATCH_RAMP_DURATION     2           </span>
<a name="l00190"></a><a class="code" href="system_8h.html#ebeee5d587e924ad6d94000c311f24af">00190</a> <span class="preprocessor">#define CATCH_MAX_SIZE          9           </span>
<a name="l00191"></a><a class="code" href="system_8h.html#ba0891209663ce63a925b18b553212c0">00191</a> <span class="preprocessor">#define CATCH_STEPS_ESTIMATED   14          </span>
<a name="l00192"></a>00192 <span class="preprocessor">#define CATCH_PAUSE_DURATION    100</span>
<a name="l00193"></a>00193 <span class="preprocessor"></span>
<a name="l00194"></a>00194 <span class="comment">// Miscaleous input output</span>
<a name="l00195"></a>00195 <span class="comment">// Shaker </span>
<a name="l00196"></a><a class="code" href="system_8h.html#22e6f4c150fbf6b05706b5a2bb5fba21">00196</a> <span class="preprocessor">#define VIBR_PORT       PORTB       </span>
<a name="l00197"></a>00197 <span class="preprocessor">#define VIBR_DDR        DDRB</span>
<a name="l00198"></a>00198 <span class="preprocessor"></span><span class="preprocessor">#define VIBR_PIN        PINB</span>
<a name="l00199"></a><a class="code" href="system_8h.html#f78ac5be23ac4f5c7e15c11066d1d6e4">00199</a> <span class="preprocessor"></span><span class="preprocessor">#define VIBR_BIT        PB3         </span>
<a name="l00200"></a><a class="code" href="system_8h.html#4984fda3c65e0b6537b6ba0403e79df8">00200</a> <span class="preprocessor">#define VIBR_ON         (VIBR_PORT |= (1&lt;&lt;VIBR_BIT))    </span>
<a name="l00201"></a><a class="code" href="system_8h.html#c70f7b118a83ce5abe0b6bd864f4368b">00201</a> <span class="preprocessor">#define VIBR_OFF        (VIBR_PORT &amp;=~(1&lt;&lt;VIBR_BIT))    </span>
<a name="l00202"></a>00202 <span class="preprocessor">#define VIBR_TOGGLE     (VIBR_PORT ^= (1&lt;&lt;VIBR_BIT))</span>
<a name="l00203"></a>00203 <span class="preprocessor"></span>
<a name="l00204"></a><a class="code" href="system_8h.html#c271169e08f6bf5342ec2950afb2ddcc">00204</a> <span class="preprocessor">#define VIBR_DURATION       (700)           </span>
<a name="l00205"></a>00205 <span class="preprocessor"></span>
<a name="l00206"></a>00206 <span class="preprocessor"></span><span class="comment">// Input rotary encoder</span>
<a name="l00207"></a><a class="code" href="system_8h.html#36e974a46736c03aed4e7b16766dcf56">00207</a> <span class="preprocessor">#define ROTENC_PORT     PORTB       </span>
<a name="l00208"></a>00208 <span class="preprocessor">#define ROTENC_PIN      PINB</span>
<a name="l00209"></a>00209 <span class="preprocessor"></span><span class="preprocessor">#define ROTENC_DDR      DDRB </span>
<a name="l00210"></a>00210 <span class="preprocessor"></span>
<a name="l00211"></a><a class="code" href="system_8h.html#8b30e63c6e09023b190d955a7a47f626">00211</a> <span class="preprocessor">#define ROTENC_A_BIT        PB0         </span>
<a name="l00212"></a><a class="code" href="system_8h.html#031b236fa86c6640016bcd026de2faf9">00212</a> <span class="preprocessor">#define ROTENC_B_BIT        PB1         </span>
<a name="l00213"></a><a class="code" href="system_8h.html#84eff8f5e4cdcc045d697ed03f48f15d">00213</a> <span class="preprocessor">#define ROTENC_PUSH_BIT     PB2         </span>
<a name="l00214"></a>00214 <span class="preprocessor"></span>
<a name="l00215"></a>00215 <span class="preprocessor"></span>
<a name="l00218"></a><a class="code" href="system_8h.html#c240f5ce32b6b780dc2becb7eede1621">00218</a> <span class="preprocessor">#define ROTENC_INIT()       (ROTENC_DDR   &amp;= ~((1&lt;&lt;ROTENC_A_BIT) | (1&lt;&lt;ROTENC_B_BIT) | (1&lt;&lt;ROTENC_PUSH_BIT)))</span>
<a name="l00219"></a>00219 <span class="preprocessor"></span>
<a name="l00220"></a><a class="code" href="system_8h.html#8ed1e2d2e71236f6fefb7158c8186157">00220</a> <span class="preprocessor">#define IS_ROTENC_A         ((ROTENC_PIN &amp; (1&lt;&lt;ROTENC_A_BIT)))      </span>
<a name="l00221"></a><a class="code" href="system_8h.html#1fc441243a6e06c3a48d825ec274af11">00221</a> <span class="preprocessor">#define IS_ROTENC_B         ((ROTENC_PIN &amp; (1&lt;&lt;ROTENC_B_BIT)))      </span>
<a name="l00222"></a><a class="code" href="system_8h.html#e24f6a75a8a7011b1e66247f8676e384">00222</a> <span class="preprocessor">#define IS_ROTENC_AB        (IS_ROTENC_A &amp;&amp; IS_ROTENC_B)            </span>
<a name="l00223"></a><a class="code" href="system_8h.html#99ce8ed66940e159cc268db2843f834d">00223</a> <span class="preprocessor">#define IS_ROTENC_NONE      (!IS_ROTENC_A &amp;&amp; !IS_ROTENC_B)          </span>
<a name="l00224"></a><a class="code" href="system_8h.html#af2c8bf6c81663c42ab7e5387bfdb9b3">00224</a> <span class="preprocessor">#define IS_ROTENC_PUSH      (ROTENC_PIN &amp; (1&lt;&lt;ROTENC_PUSH_BIT))     </span>
<a name="l00225"></a>00225 <span class="preprocessor"></span>
<a name="l00226"></a>00226 <span class="preprocessor"></span><span class="comment">// The Light barrieres (LB)</span>
<a name="l00227"></a><a class="code" href="system_8h.html#272a203de60f35633ad1efe0b987a3f8">00227</a> <span class="preprocessor">#define LB_PORT             PORTA       </span>
<a name="l00228"></a>00228 <span class="preprocessor">#define LB_DDR              DDRA</span>
<a name="l00229"></a>00229 <span class="preprocessor"></span><span class="preprocessor">#define LB_PIN              PINA</span>
<a name="l00230"></a><a class="code" href="system_8h.html#b476c77b5e9569181b54f1a1bf2635a2">00230</a> <span class="preprocessor"></span><span class="preprocessor">#define LB_BIT_CATCH        PA2         </span>
<a name="l00231"></a><a class="code" href="system_8h.html#ea1a853873533a51b5e880e30783cc42">00231</a> <span class="preprocessor">#define LB_BIT_REV          PA1         </span>
<a name="l00232"></a>00232 <span class="preprocessor"></span>
<a name="l00233"></a><a class="code" href="system_8h.html#6e17585fda3598109ead863d76cd4dad">00233</a> <span class="preprocessor"></span><span class="preprocessor">#define IS_LB_CATCHER       (!(LB_PIN &amp; (1&lt;&lt;LB_BIT_CATCH)))     </span>
<a name="l00234"></a><a class="code" href="system_8h.html#f97aa7272a24b34aaf24697d1d0d52ac">00234</a> <span class="preprocessor">#define IS_LB_REVOLVER      (!(LB_PIN &amp; (1&lt;&lt;LB_BIT_REV)))       </span>
<a name="l00235"></a>00235 <span class="preprocessor"></span>
<a name="l00236"></a>00236 <span class="preprocessor"></span>
<a name="l00239"></a><a class="code" href="system_8h.html#6e4cea4b6246f491c526211f5405627d">00239</a> <span class="keyword">typedef</span> <span class="keyword">enum</span> <a class="code" href="system_8h.html#6e4cea4b6246f491c526211f5405627d" title="The mode of the machine.">system_mode_t</a> {
<a name="l00240"></a><a class="code" href="system_8h.html#6e4cea4b6246f491c526211f5405627d6f86e68a36933ceea048d78b95769945">00240</a>     <a class="code" href="system_8h.html#6e4cea4b6246f491c526211f5405627d6f86e68a36933ceea048d78b95769945" title="After reset or power on.">SYS_MODE_INIT</a> = 0,      
<a name="l00241"></a><a class="code" href="system_8h.html#6e4cea4b6246f491c526211f5405627df1c8a041b6d3d46002d02ed0645a8ba2">00241</a>     <a class="code" href="system_8h.html#6e4cea4b6246f491c526211f5405627df1c8a041b6d3d46002d02ed0645a8ba2" title="Pausing the smartie sorter and operated manually.">SYS_MODE_PAUSE</a>,         
<a name="l00242"></a><a class="code" href="system_8h.html#6e4cea4b6246f491c526211f5405627d564529220e61e848983d8eb9d7f87736">00242</a>     <a class="code" href="system_8h.html#6e4cea4b6246f491c526211f5405627d564529220e61e848983d8eb9d7f87736" title="Smartie sorter is running automatically.">SYS_MODE_RUNNING</a>,       
<a name="l00243"></a>00243 } system_mode;
<a name="l00244"></a>00244 
<a name="l00252"></a><a class="code" href="system_8h.html#6bfb87db0720ecda67ba06ab52162b03">00252</a> <span class="keyword">typedef</span> <span class="keyword">enum</span> <a class="code" href="system_8h.html#6bfb87db0720ecda67ba06ab52162b03" title="The status a device can have.">common_stat_t</a> {
<a name="l00253"></a><a class="code" href="system_8h.html#6bfb87db0720ecda67ba06ab52162b035ad840e3bfeb7a8c1633431f009ec7fc">00253</a>     <a class="code" href="system_8h.html#6bfb87db0720ecda67ba06ab52162b035ad840e3bfeb7a8c1633431f009ec7fc" title="The module/device is doing nothing and is ready for a new job.">stat_idle</a> = 0,          
<a name="l00254"></a><a class="code" href="system_8h.html#6bfb87db0720ecda67ba06ab52162b0338a176a30f108279905bb42b5f80ad22">00254</a>     <a class="code" href="system_8h.html#6bfb87db0720ecda67ba06ab52162b0338a176a30f108279905bb42b5f80ad22" title="Setting a module&amp;#39;s state to this will start the device to work.">stat_start_working</a>,     
<a name="l00255"></a><a class="code" href="system_8h.html#6bfb87db0720ecda67ba06ab52162b03b1cdb8bf66313ecce10a4b1c240ea569">00255</a>     <a class="code" href="system_8h.html#6bfb87db0720ecda67ba06ab52162b03b1cdb8bf66313ecce10a4b1c240ea569" title="Indicates the device is busy. The device will automatically change to this state...">stat_working</a>,           
<a name="l00256"></a><a class="code" href="system_8h.html#6bfb87db0720ecda67ba06ab52162b038200fdccabe0d9e135d68523c729b1c5">00256</a>     <a class="code" href="system_8h.html#6bfb87db0720ecda67ba06ab52162b038200fdccabe0d9e135d68523c729b1c5" title="Setting a device to this state will stop the device.">stat_stop_working</a>,      
<a name="l00257"></a><a class="code" href="system_8h.html#6bfb87db0720ecda67ba06ab52162b036c9c8c7b8f55418d3c0981b2412f9324">00257</a>     <a class="code" href="system_8h.html#6bfb87db0720ecda67ba06ab52162b036c9c8c7b8f55418d3c0981b2412f9324" title="Indicates the device is finished. The device will automatically change to this state...">stat_finished</a>           
<a name="l00258"></a>00258 } common_stat;
<a name="l00259"></a>00259 
<a name="l00263"></a><a class="code" href="structsystem__step__t.html">00263</a> <span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="structsystem__step__t.html" title="The single steps during running mode SYS_MODE_RUNNING.">system_step_t</a> {
<a name="l00264"></a><a class="code" href="structsystem__step__t.html#48ef78a306bf18012f7621ce4918b423">00264</a>     common_stat <a class="code" href="structsystem__step__t.html#48ef78a306bf18012f7621ce4918b423" title="detecting colors and position catcher">I</a>;          
<a name="l00265"></a><a class="code" href="structsystem__step__t.html#fdb071a3fec04fedd7c6b65ecf627087">00265</a>     common_stat <a class="code" href="structsystem__step__t.html#fdb071a3fec04fedd7c6b65ecf627087" title="positioning revolver">II</a>;         
<a name="l00266"></a><a class="code" href="structsystem__step__t.html#8177fdec77832c82cf018a948a1d7ec0">00266</a>     common_stat <a class="code" href="structsystem__step__t.html#8177fdec77832c82cf018a948a1d7ec0" title="begin new mode cycle">III</a>;        
<a name="l00267"></a>00267 } <a class="code" href="structsystem__step__t.html" title="The single steps during running mode SYS_MODE_RUNNING.">system_step</a>;
<a name="l00268"></a>00268 
<a name="l00272"></a><a class="code" href="structsystem__state__t.html">00272</a> <span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="structsystem__state__t.html" title="Grouping of mode and steps.">system_state_t</a> {
<a name="l00273"></a><a class="code" href="structsystem__state__t.html#903c7b848a8b43a1b50e2fbb54a7cb7d">00273</a>     system_mode <a class="code" href="structsystem__state__t.html#903c7b848a8b43a1b50e2fbb54a7cb7d" title="Stores the current mode.">mode</a>;               
<a name="l00274"></a><a class="code" href="structsystem__state__t.html#d5b7e91c9a338f631520d1bad5912c8e">00274</a>     system_mode <a class="code" href="structsystem__state__t.html#d5b7e91c9a338f631520d1bad5912c8e" title="Stores the last mode for transition steps.">mode_last</a>;          
<a name="l00275"></a><a class="code" href="structsystem__state__t.html#3ce91eb47370ddf1107ad2d1cd369255">00275</a>     <a class="code" href="structsystem__step__t.html" title="The single steps during running mode SYS_MODE_RUNNING.">system_step</a> <a class="code" href="structsystem__state__t.html#3ce91eb47370ddf1107ad2d1cd369255" title="Stores the current step of the mode.">step</a>;               
<a name="l00276"></a>00276 } <a class="code" href="structsystem__state__t.html" title="Grouping of mode and steps.">system_state</a>;
<a name="l00277"></a>00277 
<a name="l00281"></a><a class="code" href="system_8h.html#6cfd37e27dfa4a49be0ab6d983f4fc55">00281</a> <span class="keyword">typedef</span> <span class="keyword">enum</span> <a class="code" href="system_8h.html#6cfd37e27dfa4a49be0ab6d983f4fc55" title="Programs which are executed during SYS_MODE_PAUSE.">program_t</a> {
<a name="l00282"></a><a class="code" href="system_8h.html#6cfd37e27dfa4a49be0ab6d983f4fc556ab1bff0b64b5014a737f2598e75a2ef">00282</a>     <a class="code" href="system_8h.html#6cfd37e27dfa4a49be0ab6d983f4fc556ab1bff0b64b5014a737f2598e75a2ef" title="No program executed.">prog_none</a> = 0,              
<a name="l00283"></a><a class="code" href="system_8h.html#6cfd37e27dfa4a49be0ab6d983f4fc55331eb332ffb09740f70737359d79fff7">00283</a>     <a class="code" href="system_8h.html#6cfd37e27dfa4a49be0ab6d983f4fc55331eb332ffb09740f70737359d79fff7" title="Indicates that the catcher rotate program is running.">prog_rotate_catcher</a>,        
<a name="l00284"></a><a class="code" href="system_8h.html#6cfd37e27dfa4a49be0ab6d983f4fc55cf735b3ab9ceededb902db503e7271b9">00284</a>     <a class="code" href="system_8h.html#6cfd37e27dfa4a49be0ab6d983f4fc55cf735b3ab9ceededb902db503e7271b9" title="Indicates that the revolver rotate program is running.">prog_rotate_revolver</a>,       
<a name="l00285"></a><a class="code" href="system_8h.html#6cfd37e27dfa4a49be0ab6d983f4fc5527897518563ff6607106d839ed48fd8e">00285</a>     <a class="code" href="system_8h.html#6cfd37e27dfa4a49be0ab6d983f4fc5527897518563ff6607106d839ed48fd8e" title="Indicates that the color measure program is runnging.">prog_color_tcs</a>,             
<a name="l00286"></a>00286     prog_color_adjd,            <span class="comment">// not implemented</span>
<a name="l00287"></a><a class="code" href="system_8h.html#6cfd37e27dfa4a49be0ab6d983f4fc55e7156e0e78e0f3ce9f2ce0d7bbe8bac5">00287</a>     <a class="code" href="system_8h.html#6cfd37e27dfa4a49be0ab6d983f4fc55e7156e0e78e0f3ce9f2ce0d7bbe8bac5" title="Calibrates the color refence values. Halts the state machine.">prog_set_colors_blue</a>,       
<a name="l00288"></a><a class="code" href="system_8h.html#6cfd37e27dfa4a49be0ab6d983f4fc55d6ae9a7c1b1f295ef5d5b24ce2b82ee9">00288</a>     <a class="code" href="system_8h.html#6cfd37e27dfa4a49be0ab6d983f4fc55d6ae9a7c1b1f295ef5d5b24ce2b82ee9" title="Calibrates the color refence values. Halts the state machine.">prog_set_colors_green</a>,      
<a name="l00289"></a><a class="code" href="system_8h.html#6cfd37e27dfa4a49be0ab6d983f4fc5520d6445008330db524343a7f811b3e5b">00289</a>     <a class="code" href="system_8h.html#6cfd37e27dfa4a49be0ab6d983f4fc5520d6445008330db524343a7f811b3e5b" title="Calibrates the color refence values. Halts the state machine.">prog_set_colors_red</a>,        
<a name="l00290"></a><a class="code" href="system_8h.html#6cfd37e27dfa4a49be0ab6d983f4fc55cacbcee890d85b9ebe3b797cc57516f3">00290</a>     <a class="code" href="system_8h.html#6cfd37e27dfa4a49be0ab6d983f4fc55cacbcee890d85b9ebe3b797cc57516f3" title="Calibrates the color refence values. Halts the state machine.">prog_set_colors_yellow</a>,     
<a name="l00291"></a><a class="code" href="system_8h.html#6cfd37e27dfa4a49be0ab6d983f4fc553e3770483237eb4ea1076e81dc517d30">00291</a>     <a class="code" href="system_8h.html#6cfd37e27dfa4a49be0ab6d983f4fc553e3770483237eb4ea1076e81dc517d30" title="Calibrates the color refence values. Halts the state machine.">prog_set_colors_orange</a>,     
<a name="l00292"></a><a class="code" href="system_8h.html#6cfd37e27dfa4a49be0ab6d983f4fc559e40df4de71d78cd961b87202f71645c">00292</a>     <a class="code" href="system_8h.html#6cfd37e27dfa4a49be0ab6d983f4fc559e40df4de71d78cd961b87202f71645c" title="Calibrates the color refence values. Halts the state machine.">prog_set_colors_brown</a>,      
<a name="l00293"></a><a class="code" href="system_8h.html#6cfd37e27dfa4a49be0ab6d983f4fc553a7a5a24627fdea73087ba56c941b3ab">00293</a>     <a class="code" href="system_8h.html#6cfd37e27dfa4a49be0ab6d983f4fc553a7a5a24627fdea73087ba56c941b3ab" title="Calibrates the color refence values. Halts the state machine.">prog_set_colors_purple</a>,     
<a name="l00294"></a><a class="code" href="system_8h.html#6cfd37e27dfa4a49be0ab6d983f4fc5501a7745145aaf9b3fe840b3cb1a6b84f">00294</a>     <a class="code" href="system_8h.html#6cfd37e27dfa4a49be0ab6d983f4fc5501a7745145aaf9b3fe840b3cb1a6b84f" title="Calibrates the color refence values. Halts the state machine.">prog_set_colors_pink</a>,       
<a name="l00295"></a><a class="code" href="system_8h.html#6cfd37e27dfa4a49be0ab6d983f4fc5532962d0000a87aa56300fc78330ac987">00295</a>     <a class="code" href="system_8h.html#6cfd37e27dfa4a49be0ab6d983f4fc5532962d0000a87aa56300fc78330ac987" title="Resores the color refernce values to system defaults. Halts the state machine.">prog_set_colors_restore</a>,    
<a name="l00296"></a>00296     prog_set_speed
<a name="l00297"></a>00297 } program;
<a name="l00298"></a>00298 
<a name="l00302"></a><a class="code" href="system_8h.html#923f420a1efca515e1bfe2c011251656">00302</a> <span class="keyword">typedef</span> <span class="keyword">enum</span> <a class="code" href="system_8h.html#923f420a1efca515e1bfe2c011251656" title="The rotary encoder&amp;#39;s elements can have following status.">rotary_encoder_status_t</a> {
<a name="l00303"></a><a class="code" href="system_8h.html#923f420a1efca515e1bfe2c0112516564bd228ea80648a3b16df58abfdd6ea9d">00303</a>     <a class="code" href="system_8h.html#923f420a1efca515e1bfe2c0112516564bd228ea80648a3b16df58abfdd6ea9d" title="Applicable for Push button, A-Pin and B-Pin.">ROTENC_NONE</a> = 0,        
<a name="l00304"></a><a class="code" href="system_8h.html#923f420a1efca515e1bfe2c011251656c0eb319f9fad09fcfeb02bb451f4439f">00304</a>     <a class="code" href="system_8h.html#923f420a1efca515e1bfe2c011251656c0eb319f9fad09fcfeb02bb451f4439f" title="The Button is pushed.">ROTENC_PUSH</a>,            
<a name="l00305"></a><a class="code" href="system_8h.html#923f420a1efca515e1bfe2c01125165664f2849084488303c9ad5ca647ee092f">00305</a>     <a class="code" href="system_8h.html#923f420a1efca515e1bfe2c01125165664f2849084488303c9ad5ca647ee092f" title="Currently only the A-Pin of the rotary encoder is set.">ROTENC_A</a>,               
<a name="l00306"></a><a class="code" href="system_8h.html#923f420a1efca515e1bfe2c011251656df4ec4b04f8ce6651b513e7c3f138604">00306</a>     <a class="code" href="system_8h.html#923f420a1efca515e1bfe2c011251656df4ec4b04f8ce6651b513e7c3f138604" title="Currently only the B-Pin of the rotary encoder is set.">ROTENC_B</a>,               
<a name="l00307"></a><a class="code" href="system_8h.html#923f420a1efca515e1bfe2c011251656f76a18508dafe7406c2e4ed288ce4fd3">00307</a>     <a class="code" href="system_8h.html#923f420a1efca515e1bfe2c011251656f76a18508dafe7406c2e4ed288ce4fd3" title="Currently both, the A-Pin and B-Pin of the rotary encoder are set.">ROTENC_BOTH</a>             
<a name="l00308"></a>00308 } rotary_encoder_status;
<a name="l00309"></a>00309 
<a name="l00313"></a><a class="code" href="structrotary__encoder__t.html">00313</a> <span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="structrotary__encoder__t.html" title="The rotary encoder (user input device) structure.">rotary_encoder_t</a> {
<a name="l00314"></a><a class="code" href="structrotary__encoder__t.html#4c3ef6e33c8b1a62cc0fd62885692e46">00314</a>     uint8_t <a class="code" href="structrotary__encoder__t.html#4c3ef6e33c8b1a62cc0fd62885692e46" title="The amount of detected pushes.">push</a>;           
<a name="l00315"></a><a class="code" href="structrotary__encoder__t.html#bf888e3b4cc08d5ced47c59224d6aa57">00315</a>     uint8_t <a class="code" href="structrotary__encoder__t.html#bf888e3b4cc08d5ced47c59224d6aa57" title="The amount of detected right turns.">right</a>;          
<a name="l00316"></a><a class="code" href="structrotary__encoder__t.html#264955f38189fb291a5698e99acf55df">00316</a>     uint8_t <a class="code" href="structrotary__encoder__t.html#264955f38189fb291a5698e99acf55df" title="The amount of detected left turns.">left</a>;           
<a name="l00317"></a><a class="code" href="structrotary__encoder__t.html#ff884925a4a9652bc168b11cdf83d50a">00317</a>     uint8_t <a class="code" href="structrotary__encoder__t.html#ff884925a4a9652bc168b11cdf83d50a" title="Stores temporarely status of pushbutton.">pushtmp</a>;        
<a name="l00318"></a><a class="code" href="structrotary__encoder__t.html#39ea4817ade6d51edfbf0d19cb09eefb">00318</a>     uint8_t <a class="code" href="structrotary__encoder__t.html#39ea4817ade6d51edfbf0d19cb09eefb" title="Stores temporarely status of rotation.">rottmp</a>;         
<a name="l00319"></a>00319 } <a class="code" href="structrotary__encoder__t.html" title="The rotary encoder (user input device) structure.">rotary_encoder</a>;
<a name="l00320"></a>00320 
<a name="l00329"></a><a class="code" href="system_8h.html#7b19b2744b17f8f369226dd73101a4b2">00329</a> <span class="keyword">typedef</span> <span class="keyword">enum</span> <a class="code" href="system_8h.html#7b19b2744b17f8f369226dd73101a4b2" title="All supported colors.">smartie_color_t</a> {
<a name="l00330"></a><a class="code" href="system_8h.html#7b19b2744b17f8f369226dd73101a4b2b5a96dd4664a6aeab46c81b3f7e357be">00330</a>     <a class="code" href="system_8h.html#7b19b2744b17f8f369226dd73101a4b2b5a96dd4664a6aeab46c81b3f7e357be" title="Blue.">col_blue</a> = 0,       
<a name="l00331"></a><a class="code" href="system_8h.html#7b19b2744b17f8f369226dd73101a4b26a0e2721ce49eab7403f47519fc0ef64">00331</a>     <a class="code" href="system_8h.html#7b19b2744b17f8f369226dd73101a4b26a0e2721ce49eab7403f47519fc0ef64" title="Green.">col_green</a>,          
<a name="l00332"></a><a class="code" href="system_8h.html#7b19b2744b17f8f369226dd73101a4b2f3023a6d67057a1b646478eb80619db2">00332</a>     <a class="code" href="system_8h.html#7b19b2744b17f8f369226dd73101a4b2f3023a6d67057a1b646478eb80619db2" title="Red.">col_red</a>,            
<a name="l00333"></a><a class="code" href="system_8h.html#7b19b2744b17f8f369226dd73101a4b2b41b78747aaed535dfae65498e06ad26">00333</a>     <a class="code" href="system_8h.html#7b19b2744b17f8f369226dd73101a4b2b41b78747aaed535dfae65498e06ad26" title="Yellow.">col_yellow</a>,         
<a name="l00334"></a><a class="code" href="system_8h.html#7b19b2744b17f8f369226dd73101a4b25cdf68f9bbce4f120d93db95e584146c">00334</a>     <a class="code" href="system_8h.html#7b19b2744b17f8f369226dd73101a4b25cdf68f9bbce4f120d93db95e584146c" title="Orange.">col_orange</a>,         
<a name="l00335"></a><a class="code" href="system_8h.html#7b19b2744b17f8f369226dd73101a4b256708c6b715321f832ce4ca7426a3b31">00335</a>     <a class="code" href="system_8h.html#7b19b2744b17f8f369226dd73101a4b256708c6b715321f832ce4ca7426a3b31" title="Brown.">col_brown</a>,          
<a name="l00336"></a><a class="code" href="system_8h.html#7b19b2744b17f8f369226dd73101a4b229840715f465dff615d65002c94f5cfc">00336</a>     <a class="code" href="system_8h.html#7b19b2744b17f8f369226dd73101a4b229840715f465dff615d65002c94f5cfc" title="Purple.">col_purple</a>,         
<a name="l00337"></a><a class="code" href="system_8h.html#7b19b2744b17f8f369226dd73101a4b278bb2430f9b464e19f321964a6e75aa2">00337</a>     <a class="code" href="system_8h.html#7b19b2744b17f8f369226dd73101a4b278bb2430f9b464e19f321964a6e75aa2" title="Pink.">col_pink</a>,           
<a name="l00338"></a><a class="code" href="system_8h.html#7b19b2744b17f8f369226dd73101a4b2eded117679751933625c43b5c80d7a44">00338</a>     <a class="code" href="system_8h.html#7b19b2744b17f8f369226dd73101a4b2eded117679751933625c43b5c80d7a44" title="Indexed as last color (highest counter). Insert colors above this one!">col_unknown</a>         
<a name="l00339"></a>00339 } smartie_color;
<a name="l00340"></a>00340 
<a name="l00344"></a><a class="code" href="structsmartie__t.html">00344</a> <span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="structsmartie__t.html" title="Describes the properties a smartie, which is transported by the revolver_t, can have...">smartie_t</a> {
<a name="l00345"></a><a class="code" href="structsmartie__t.html#d6404bb9745efb547327916cfa322788">00345</a>     smartie_color <a class="code" href="structsmartie__t.html#d6404bb9745efb547327916cfa322788" title="Merged color.">color</a>;    
<a name="l00346"></a><a class="code" href="structsmartie__t.html#d52ae51f3ecaf7900f1930f2febc22f8">00346</a>     smartie_color <a class="code" href="structsmartie__t.html#d52ae51f3ecaf7900f1930f2febc22f8" title="From TCS color sensor.">color1</a>;   
<a name="l00347"></a><a class="code" href="structsmartie__t.html#db08258411e1fd0025f16b6e2ea205be">00347</a>     smartie_color <a class="code" href="structsmartie__t.html#db08258411e1fd0025f16b6e2ea205be" title="From ADJD color sensor.">color2</a>;   
<a name="l00348"></a>00348 } <a class="code" href="structsmartie__t.html" title="Describes the properties a smartie, which is transported by the revolver_t, can have...">smartie</a>;
<a name="l00349"></a>00349 
<a name="l00350"></a>00350 
<a name="l00354"></a><a class="code" href="system_8h.html#a7daceea8fb8d9b7b97d6052911e946c">00354</a> <span class="keyword">typedef</span> <span class="keyword">enum</span> <a class="code" href="system_8h.html#a7daceea8fb8d9b7b97d6052911e946c" title="The status a lightbarrier can have.">lightbarrier_status_t</a> {
<a name="l00355"></a><a class="code" href="system_8h.html#a7daceea8fb8d9b7b97d6052911e946cea3827a9d47251fb40b1ec898e1caa60">00355</a>     <a class="code" href="system_8h.html#a7daceea8fb8d9b7b97d6052911e946cea3827a9d47251fb40b1ec898e1caa60" title="Nothing inbetween the lightbarrier.">lb_free</a> = 0,                        
<a name="l00356"></a><a class="code" href="system_8h.html#a7daceea8fb8d9b7b97d6052911e946ccb114de7ce8e7d32a39be8feeccf9f49">00356</a>     <a class="code" href="system_8h.html#a7daceea8fb8d9b7b97d6052911e946ccb114de7ce8e7d32a39be8feeccf9f49" title="The lightbarrier is blocked.">lb_blocked</a>                          
<a name="l00357"></a>00357 } lightbarrier_status;
<a name="l00358"></a>00358 
<a name="l00362"></a><a class="code" href="structlightbarrier__t.html">00362</a> <span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="structlightbarrier__t.html" title="Describes the module lightbarrier.">lightbarrier_t</a> {
<a name="l00363"></a><a class="code" href="structlightbarrier__t.html#7d8442ff466cb10fc8507df2c19faf17">00363</a>     lightbarrier_status <a class="code" href="structlightbarrier__t.html#7d8442ff466cb10fc8507df2c19faf17" title="The actual status of the lightbarrier.">status</a>;         
<a name="l00364"></a><a class="code" href="structlightbarrier__t.html#81cf723bbacceedcc1d4328558a77e3e">00364</a>     lightbarrier_status <a class="code" href="structlightbarrier__t.html#81cf723bbacceedcc1d4328558a77e3e" title="For recognising a pass.">status_last</a>;    
<a name="l00365"></a><a class="code" href="structlightbarrier__t.html#1440294184c4cfe99bd441730874cb2e">00365</a>     uint8_t <a class="code" href="structlightbarrier__t.html#1440294184c4cfe99bd441730874cb2e" title="The amount of recognized passes through the lightbarrier.">passes</a>;                     
<a name="l00366"></a>00366     int8_t (*<a class="code" href="structlightbarrier__t.html#c8b595c6aeebea02b31d11baea5a0df5" title="Returns TRUE if the lightbarrier is blocked.">is_blocked</a>)();             
<a name="l00367"></a>00367 } <a class="code" href="structlightbarrier__t.html" title="Describes the module lightbarrier.">lightbarrier</a>;
<a name="l00368"></a>00368 
<a name="l00372"></a><a class="code" href="structstepper__motor__t.html">00372</a> <span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="structstepper__motor__t.html" title="The stepper motor.">stepper_motor_t</a> {
<a name="l00373"></a><a class="code" href="structstepper__motor__t.html#71c0bbc3adc7f7f200e6853fd361c12d">00373</a>     common_stat <a class="code" href="structstepper__motor__t.html#71c0bbc3adc7f7f200e6853fd361c12d" title="Status.">status</a>;         
<a name="l00374"></a><a class="code" href="structstepper__motor__t.html#4bbf149941b37969ce2a486bc7bea81e">00374</a>     common_stat <a class="code" href="structstepper__motor__t.html#4bbf149941b37969ce2a486bc7bea81e" title="The last status.">status_last</a>;    
<a name="l00375"></a><a class="code" href="structstepper__motor__t.html#00163b2a2a26dd96e68beb08f4eb3c6e">00375</a>     int8_t <a class="code" href="structstepper__motor__t.html#00163b2a2a26dd96e68beb08f4eb3c6e" title="Current position (smartie_color_t can also be used).">current_pos</a>;         
<a name="l00376"></a><a class="code" href="structstepper__motor__t.html#a21f2e88216c74bd38d655b596b927c2">00376</a>     int8_t <a class="code" href="structstepper__motor__t.html#a21f2e88216c74bd38d655b596b927c2" title="Target position (smartie_color_t can also be used).">target_pos</a>;          
<a name="l00377"></a><a class="code" href="structstepper__motor__t.html#af03118d7157229734ebbf8e5cc43c2d">00377</a>     uint16_t <a class="code" href="structstepper__motor__t.html#af03118d7157229734ebbf8e5cc43c2d" title="One cycle takes 1 millisecond.">cycle_counter</a>;     
<a name="l00378"></a><a class="code" href="structstepper__motor__t.html#c9eccf8cef29d07f43317c0814d821f2">00378</a>     uint8_t <a class="code" href="structstepper__motor__t.html#c9eccf8cef29d07f43317c0814d821f2" title="Count every step to estimate when to ramp down.">steps</a>;              
<a name="l00379"></a><a class="code" href="structstepper__motor__t.html#271f73d7af7fc3c94994448d9e3ab811">00379</a>     uint8_t <a class="code" href="structstepper__motor__t.html#271f73d7af7fc3c94994448d9e3ab811" title="One step takes CATCH_STEP_DURATION or REV_STEP_DURATION steps.">ramp_steps</a>;         
<a name="l00380"></a><a class="code" href="structstepper__motor__t.html#54b0e9b52201abc53290a49adf99412a">00380</a>     uint8_t <a class="code" href="structstepper__motor__t.html#54b0e9b52201abc53290a49adf99412a" title="Ramp duration lasts CATCH_RAMP_DURATION or REV_RAMP_DURATION.">ramp_duration</a>;      
<a name="l00381"></a><a class="code" href="structstepper__motor__t.html#0ed248c8aa0519d4f46c1138c6d56cc1">00381</a>     uint8_t <a class="code" href="structstepper__motor__t.html#0ed248c8aa0519d4f46c1138c6d56cc1" title="Steps counted from as soon as the lightbarriere is blocked.">steps_estimated</a>;    
<a name="l00382"></a><a class="code" href="structstepper__motor__t.html#3351f7a8001ddf9e7107778f92118717">00382</a>     uint8_t <a class="code" href="structstepper__motor__t.html#3351f7a8001ddf9e7107778f92118717" title="Start (default) value for CATCH_STEPS_ESTIMATED or REV_STEPS_ESTIMATED.">steps_estim_def</a>;    
<a name="l00383"></a><a class="code" href="structstepper__motor__t.html#9321372de70c6e871bcb0a9e14b28c87">00383</a>     int8_t <a class="code" href="structstepper__motor__t.html#9321372de70c6e871bcb0a9e14b28c87" title="Max. positions. CATCH_MAX_POS or REV_MAX_POS.">max_size</a>;            
<a name="l00384"></a><a class="code" href="structstepper__motor__t.html#c167ddba27c9544bb898f03c9b129ab9">00384</a>     int8_t <a class="code" href="structstepper__motor__t.html#c167ddba27c9544bb898f03c9b129ab9" title="The duration of REV_STEP_DURATION or CATCH_STEP_DURATION cycles lasts one step.">step_duration</a>;       
<a name="l00385"></a><a class="code" href="structstepper__motor__t.html#4335e6bd85d6eabe62ba1beeebc0cd5e">00385</a>     int16_t <a class="code" href="structstepper__motor__t.html#4335e6bd85d6eabe62ba1beeebc0cd5e" title="The motor pauses as long as this is not zero.">pause</a>;              
<a name="l00386"></a><a class="code" href="structstepper__motor__t.html#8d1622d7b7bfa1be48ceeaa0c1691e26">00386</a>     int16_t <a class="code" href="structstepper__motor__t.html#8d1622d7b7bfa1be48ceeaa0c1691e26" title="Default value (CATCH_PAUSE_DURATION or REV_PAUSE_DURATION).">pause_duration</a>;     
<a name="l00387"></a><a class="code" href="structstepper__motor__t.html#f134d2e58473638fa2a0f399caf641f7">00387</a>     <a class="code" href="structlightbarrier__t.html" title="Describes the module lightbarrier.">lightbarrier</a> *<a class="code" href="structstepper__motor__t.html#f134d2e58473638fa2a0f399caf641f7" title="The lightbarrier that corresponds to that motor.">lb</a>;           
<a name="l00388"></a>00388     void (*<a class="code" href="structstepper__motor__t.html#5917b6c46ec2e10be4a7c91e5ecbfde5" title="Will enable the motor (power on).">enable</a>)();           
<a name="l00389"></a>00389     void (*<a class="code" href="structstepper__motor__t.html#3de57827f6cd4c85b9a632d5073e5dac" title="Will diable the motor (power off).">disable</a>) ();         
<a name="l00390"></a>00390     void (*<a class="code" href="structstepper__motor__t.html#70f57cb4e3039c8c3cf145cecec3aba7" title="Will move the motor for one step.">move_step</a>) ();       
<a name="l00391"></a>00391 } <a class="code" href="structstepper__motor__t.html" title="The stepper motor.">stepper_motor</a>;
<a name="l00392"></a>00392 
<a name="l00396"></a><a class="code" href="structcolor__sensor__adjd__t.html">00396</a> <span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="structcolor__sensor__adjd__t.html" title="Describes the ADJD-S371 color sensor.">color_sensor_adjd_t</a> {
<a name="l00397"></a><a class="code" href="structcolor__sensor__adjd__t.html#9a68510ce77ed9824408724a06982a9c">00397</a>     common_stat <a class="code" href="structcolor__sensor__adjd__t.html#9a68510ce77ed9824408724a06982a9c" title="The current status of the color sensor.">status</a>;         
<a name="l00398"></a><a class="code" href="structcolor__sensor__adjd__t.html#2946bac9d2bef0a9132825d630eec978">00398</a>     common_stat <a class="code" href="structcolor__sensor__adjd__t.html#2946bac9d2bef0a9132825d630eec978" title="The last status of the color sensor.">status_last</a>;    
<a name="l00399"></a><a class="code" href="structcolor__sensor__adjd__t.html#24ce0cda961c65e3bea3532249eb43b1">00399</a>     smartie_color <a class="code" href="structcolor__sensor__adjd__t.html#24ce0cda961c65e3bea3532249eb43b1" title="The value from the last color detection.">color</a>;        
<a name="l00400"></a>00400 } <a class="code" href="structcolor__sensor__adjd__t.html" title="Describes the ADJD-S371 color sensor.">color_sensor_adjd</a>;
<a name="l00401"></a>00401 
<a name="l00405"></a><a class="code" href="structcolor__sensor__tcs__t.html">00405</a> <span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="structcolor__sensor__tcs__t.html" title="Describes the TCS230 color sensor.">color_sensor_tcs_t</a> {
<a name="l00406"></a><a class="code" href="structcolor__sensor__tcs__t.html#6cf7d985b536f4551302359ddb90c802">00406</a>     common_stat <a class="code" href="structcolor__sensor__tcs__t.html#6cf7d985b536f4551302359ddb90c802" title="The current status of the color sensor.">status</a>;         
<a name="l00407"></a><a class="code" href="structcolor__sensor__tcs__t.html#a7f30fead1929b6ef4c7923fff04ec46">00407</a>     common_stat <a class="code" href="structcolor__sensor__tcs__t.html#a7f30fead1929b6ef4c7923fff04ec46" title="The status before current status.">status_last</a>;    
<a name="l00408"></a><a class="code" href="structcolor__sensor__tcs__t.html#645722a2409effbe46339525eba50542">00408</a>     smartie_color <a class="code" href="structcolor__sensor__tcs__t.html#645722a2409effbe46339525eba50542" title="The value from the last color detection.">color</a>;        
<a name="l00409"></a><a class="code" href="structcolor__sensor__tcs__t.html#e9113cc53cd30cde0c6a1cdbdef7898d">00409</a>     int16_t <a class="code" href="structcolor__sensor__tcs__t.html#e9113cc53cd30cde0c6a1cdbdef7898d" title="Especially for the TCS frequency mesurement. In milliseconds.">time</a>;               
<a name="l00410"></a><a class="code" href="structcolor__sensor__tcs__t.html#932f2edbd620800cb115897b50537616">00410</a>     int16_t <a class="code" href="structcolor__sensor__tcs__t.html#932f2edbd620800cb115897b50537616" title="The clock frequency in kHz measured with blue filter on.">filter_freq_blue</a>;   
<a name="l00411"></a><a class="code" href="structcolor__sensor__tcs__t.html#492b9a4317c14731f6a79d1b44372bcf">00411</a>     int16_t <a class="code" href="structcolor__sensor__tcs__t.html#492b9a4317c14731f6a79d1b44372bcf" title="The clock frequency in kHz measured with green filter on.">filter_freq_green</a>;  
<a name="l00412"></a><a class="code" href="structcolor__sensor__tcs__t.html#a82029dfdc10172be6206df50c80eb08">00412</a>     int16_t <a class="code" href="structcolor__sensor__tcs__t.html#a82029dfdc10172be6206df50c80eb08" title="The clock frequency in kHz measured with red filter on.">filter_freq_red</a>;    
<a name="l00413"></a><a class="code" href="structcolor__sensor__tcs__t.html#1960e5bd9f79595e67082119b3aaa15a">00413</a>     int16_t <a class="code" href="structcolor__sensor__tcs__t.html#1960e5bd9f79595e67082119b3aaa15a" title="The clock frequency in kHz measured with no filter on. Could be interpreted as general...">filter_freq_none</a>;   
<a name="l00414"></a><a class="code" href="structcolor__sensor__tcs__t.html#747977dacfa4ab5d769ac72ad0db2ce6">00414</a>     int16_t <a class="code" href="structcolor__sensor__tcs__t.html#747977dacfa4ab5d769ac72ad0db2ce6" title="The amount of slopes recognised during COL_SENS_TCS_SAMPLE_TIME.">slopes</a>;             
<a name="l00415"></a><a class="code" href="structcolor__sensor__tcs__t.html#5711e6b7dd97725d47387d57767f76f3">00415</a>     int16_t <a class="code" href="structcolor__sensor__tcs__t.html#5711e6b7dd97725d47387d57767f76f3" title="Needed for the distance to an reference value.">distance</a>;           
<a name="l00416"></a>00416 } <a class="code" href="structcolor__sensor__tcs__t.html" title="Describes the TCS230 color sensor.">color_sensor_tcs</a>;
<a name="l00417"></a>00417 
<a name="l00421"></a><a class="code" href="structvibrator__t.html">00421</a> <span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="structvibrator__t.html" title="Describes the virbrator (shaker) module.">vibrator_t</a> {
<a name="l00422"></a><a class="code" href="structvibrator__t.html#adaff41fc66c7912a53deda23fb63836">00422</a>     common_stat <a class="code" href="structvibrator__t.html#adaff41fc66c7912a53deda23fb63836" title="Status.">status</a>;                 
<a name="l00423"></a><a class="code" href="structvibrator__t.html#76cb1de3fb90a68cd5e9066e8280b918">00423</a>     common_stat <a class="code" href="structvibrator__t.html#76cb1de3fb90a68cd5e9066e8280b918" title="The last status.">status_last</a>;            
<a name="l00424"></a><a class="code" href="structvibrator__t.html#3fc18b753af884b44c24013e0ffff2b1">00424</a>     uint16_t <a class="code" href="structvibrator__t.html#3fc18b753af884b44c24013e0ffff2b1" title="How long to vibrate the shaker in ms ( SHAKER_DURATION ).">duration</a>;                  
<a name="l00425"></a>00425 } <a class="code" href="structvibrator__t.html" title="Describes the virbrator (shaker) module.">vibrator</a>;
<a name="l00426"></a>00426 
<a name="l00427"></a>00427 
<a name="l00431"></a><a class="code" href="structrevolver__t.html">00431</a> <span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="structrevolver__t.html" title="Describes the revolver module (the disc).">revolver_t</a> {
<a name="l00432"></a><a class="code" href="structrevolver__t.html#cb200f90913d439f988b778ce7a8f2ea">00432</a>     <a class="code" href="structsmartie__t.html" title="Describes the properties a smartie, which is transported by the revolver_t, can have...">smartie</a> <a class="code" href="structrevolver__t.html#cb200f90913d439f988b778ce7a8f2ea" title="A list of all smarties the revolver contains.">smart</a>[<a class="code" href="system_8h.html#388331d885423f07d4a701af481c62a7" title="The amount of smarties (holes) which fit into the revolver.">REV_MAX_SIZE</a>];    
<a name="l00433"></a>00433 } <a class="code" href="structrevolver__t.html" title="Describes the revolver module (the disc).">revolver</a>;
<a name="l00434"></a>00434 
<a name="l00435"></a>00435 
<a name="l00439"></a><a class="code" href="structsmartie__sorter__t.html">00439</a> <span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="structsmartie__sorter__t.html" title="All devices from the smartie sorter collected to one bundle.">smartie_sorter_t</a> {
<a name="l00440"></a><a class="code" href="structsmartie__sorter__t.html#e1f5a066e6d2b665e740e2e85abda282">00440</a>     <a class="code" href="structsystem__state__t.html" title="Grouping of mode and steps.">system_state</a> <a class="code" href="structsmartie__sorter__t.html#e1f5a066e6d2b665e740e2e85abda282" title="Stores the current state.">state</a>;                 
<a name="l00441"></a><a class="code" href="structsmartie__sorter__t.html#e79de6c1d37bb79d82dff4a2490b7c40">00441</a>     program <a class="code" href="structsmartie__sorter__t.html#e79de6c1d37bb79d82dff4a2490b7c40" title="The programm which is running during SYS_MODE_PAUSE.">prog</a>;                       
<a name="l00442"></a><a class="code" href="structsmartie__sorter__t.html#59076ebbfebca17e84e199762ac2e22d">00442</a>     <a class="code" href="structcolor__sensor__adjd__t.html" title="Describes the ADJD-S371 color sensor.">color_sensor_adjd</a> <a class="code" href="structsmartie__sorter__t.html#59076ebbfebca17e84e199762ac2e22d" title="Digital color sensor.">sens_adjd</a>;        
<a name="l00443"></a><a class="code" href="structsmartie__sorter__t.html#754376ba2843632710265283f54c1322">00443</a>     <a class="code" href="structcolor__sensor__tcs__t.html" title="Describes the TCS230 color sensor.">color_sensor_tcs</a> <a class="code" href="structsmartie__sorter__t.html#754376ba2843632710265283f54c1322" title="Analog color sensor.">sens_tcs</a>;          
<a name="l00444"></a><a class="code" href="structsmartie__sorter__t.html#b5ef065f7badb65086f95596429da8a0">00444</a>     <a class="code" href="structstepper__motor__t.html" title="The stepper motor.">stepper_motor</a> <a class="code" href="structsmartie__sorter__t.html#b5ef065f7badb65086f95596429da8a0" title="Stepper motor for the catcher area.">mot_catcher</a>;          
<a name="l00445"></a><a class="code" href="structsmartie__sorter__t.html#5b8f8fbb8530900a08b4dcdfad2408fa">00445</a>     <a class="code" href="structstepper__motor__t.html" title="The stepper motor.">stepper_motor</a> <a class="code" href="structsmartie__sorter__t.html#5b8f8fbb8530900a08b4dcdfad2408fa" title="Stepper motor for the revolver.">mot_revolver</a>;         
<a name="l00446"></a><a class="code" href="structsmartie__sorter__t.html#5da0a185179d3783111c2cb001d75f78">00446</a>     <a class="code" href="structlightbarrier__t.html" title="Describes the module lightbarrier.">lightbarrier</a> <a class="code" href="structsmartie__sorter__t.html#5da0a185179d3783111c2cb001d75f78" title="Lightbarrier for the catcher.">lb_catcher</a>;            
<a name="l00447"></a><a class="code" href="structsmartie__sorter__t.html#7a25892a550431decfc6ff9a2a722307">00447</a>     <a class="code" href="structlightbarrier__t.html" title="Describes the module lightbarrier.">lightbarrier</a> <a class="code" href="structsmartie__sorter__t.html#7a25892a550431decfc6ff9a2a722307" title="Lightbarrier for the revolver.">lb_revolver</a>;           
<a name="l00448"></a><a class="code" href="structsmartie__sorter__t.html#aa730d2f15b0f5bc4292378612577a4a">00448</a>     <a class="code" href="structvibrator__t.html" title="Describes the virbrator (shaker) module.">vibrator</a> <a class="code" href="structsmartie__sorter__t.html#aa730d2f15b0f5bc4292378612577a4a" title="Shaker (or vibrator).">vibr</a>;                      
<a name="l00449"></a><a class="code" href="structsmartie__sorter__t.html#20530712b28b29eef3109313b9907bd2">00449</a>     <a class="code" href="structrotary__encoder__t.html" title="The rotary encoder (user input device) structure.">rotary_encoder</a> <a class="code" href="structsmartie__sorter__t.html#20530712b28b29eef3109313b9907bd2" title="The rotary encoder (user input).">rotenc</a>;              
<a name="l00450"></a><a class="code" href="structsmartie__sorter__t.html#94a0cc186fb2a8ca66bfcae1c341a0bb">00450</a>     <a class="code" href="structrevolver__t.html" title="Describes the revolver module (the disc).">revolver</a> <a class="code" href="structsmartie__sorter__t.html#94a0cc186fb2a8ca66bfcae1c341a0bb" title="The revolver disc with smarties.">rev</a>;                       
<a name="l00451"></a><a class="code" href="structsmartie__sorter__t.html#dd43953759e4028e7eae83127ce6c98b">00451</a>     uint16_t <a class="code" href="structsmartie__sorter__t.html#dd43953759e4028e7eae83127ce6c98b" title="The operating speed (pause durations) the higher, the slower. See also sys_set_speed()...">speed</a>;                     
<a name="l00452"></a>00452 } <a class="code" href="structsmartie__sorter__t.html" title="All devices from the smartie sorter collected to one bundle.">smartie_sorter</a>;
<a name="l00453"></a>00453 
<a name="l00457"></a><a class="code" href="system_8h.html#b51ee7141ec54f3e8185d9487af887d5">00457</a> <span class="keyword">typedef</span> <span class="keywordtype">float</span> <a class="code" href="system_8h.html#b51ee7141ec54f3e8185d9487af887d5" title="Stores the color reference values of one channel for all smarties.">color_avarage</a>[<a class="code" href="system_8h.html#7b19b2744b17f8f369226dd73101a4b2eded117679751933625c43b5c80d7a44" title="Indexed as last color (highest counter). Insert colors above this one!">col_unknown</a>];
<a name="l00458"></a>00458 
<a name="l00462"></a>00462 
<a name="l00463"></a>00463 <span class="keywordtype">void</span>    <a class="code" href="system_8c.html#fcc5a33541d29a2d114643e67b7a5e68" title="Will set the current menu to the upper menu layer.">sys_enter_topmenu</a> ();
<a name="l00464"></a>00464 <span class="keywordtype">void</span>    <a class="code" href="system_8c.html#5e456b56f0c2ce2d53923272af0ad333" title="Will set the current menu to to lower menu layer.">sys_enter_submenu</a> ();
<a name="l00465"></a>00465 
<a name="l00466"></a>00466 <span class="keywordtype">void</span>    <a class="code" href="system_8c.html#a740aed754b50165fb058dad9713f2f8" title="Enables (power on) the catcher stepper motor.">sys_catcher_enable</a> ();
<a name="l00467"></a>00467 <span class="keywordtype">void</span>    <a class="code" href="system_8c.html#e2936ed52c758b103718c0101d5133df" title="Diables (power off) the catcher stepper motor.">sys_catcher_disable</a> ();
<a name="l00468"></a>00468 <span class="keywordtype">void</span>    <a class="code" href="system_8c.html#c8a68f0c5c371bc0f41e3ff4655eb9fa" title="Moves the catcher stepper motor for on step.">sys_catcher_move_step</a> ();
<a name="l00469"></a>00469 <span class="keywordtype">void</span>    <a class="code" href="system_8c.html#75278bd6ede508871b8d7880f24503d8" title="Rotates the catcher for one position.">sys_catcher_rotate</a> ();
<a name="l00470"></a>00470 int8_t  <a class="code" href="system_8c.html#60124c61aa7941fb311fdb4d85e6ba66" title="Returns status for the catcher lightbarrier.">sys_catcher_is_lb_blocked</a> ();
<a name="l00471"></a>00471 
<a name="l00472"></a>00472 uint8_t <a class="code" href="system_8c.html#03ea663e9ae339039bc5cbcddee52d94" title="Gets the correct out index of the next to drop smartie.">sys_get_out_pos</a>();
<a name="l00473"></a>00473 
<a name="l00474"></a>00474 <span class="keywordtype">void</span>    sys_revolver_enable ();
<a name="l00475"></a>00475 <span class="keywordtype">void</span>    sys_revolver_disable ();
<a name="l00476"></a>00476 <span class="keywordtype">void</span>    <a class="code" href="system_8c.html#f98b8357b55993121effd5f8a144db21" title="Moves the revolver for one step.">sys_revolver_move_step</a> ();
<a name="l00477"></a>00477 <span class="keywordtype">void</span>    <a class="code" href="system_8c.html#9fcb8a68acbcbb5ab57ca0ea752b5ad6" title="Rotates the revolver for one position.">sys_revolver_rotate</a> ();
<a name="l00478"></a>00478 int8_t  <a class="code" href="system_8c.html#768659fc9adb5f8edca3aed8711ef448" title="Returns the status for the revolver lightbarrier.">sys_revolver_is_lb_blocked</a> ();
<a name="l00479"></a>00479 
<a name="l00480"></a>00480 <span class="keywordtype">void</span>    <a class="code" href="system_8c.html#851876925adec6a4c6d7cb6aec4bbbfd" title="Will Enter the pause mode.">sys_pause</a>();
<a name="l00481"></a>00481 <span class="keywordtype">void</span>    <a class="code" href="system_8c.html#73eeab714172d1723e3d412f36002a9b" title="Leave the pause mode.">sys_resume</a>();
<a name="l00482"></a>00482 
<a name="l00483"></a>00483 <span class="keywordtype">void</span>    <a class="code" href="system_8c.html#6d65cab872ca8f9d37af4287ee012740" title="Initiates color callibration for corresponding smartie color.">sys_reference_measure_blue</a>();
<a name="l00484"></a>00484 <span class="keywordtype">void</span>    <a class="code" href="system_8c.html#4ff06646314a1ccaf1947c9986c2486d" title="See sys_reference_measure_blue ().">sys_reference_measure_green</a>();
<a name="l00485"></a>00485 <span class="keywordtype">void</span>    <a class="code" href="system_8c.html#1ca664e0f0800b98f4e3cbb6295429ee" title="See sys_reference_measure_blue ().">sys_reference_measure_red</a>();
<a name="l00486"></a>00486 <span class="keywordtype">void</span>    <a class="code" href="system_8c.html#4dfe8d9daa9b136d3c7b5eb0c7d54489" title="See sys_reference_measure_blue ().">sys_reference_measure_yellow</a>();
<a name="l00487"></a>00487 <span class="keywordtype">void</span>    <a class="code" href="system_8c.html#430fcc5c084c5d195784456a4b0241fe" title="See sys_reference_measure_blue ().">sys_reference_measure_orange</a>();
<a name="l00488"></a>00488 <span class="keywordtype">void</span>    <a class="code" href="system_8c.html#5ede569de5e4adae83654eadf689319d" title="See sys_reference_measure_blue ().">sys_reference_measure_brown</a>();
<a name="l00489"></a>00489 <span class="keywordtype">void</span>    <a class="code" href="system_8c.html#30d1084c81b5ad36c00bb9ee8fe9ac13" title="See sys_reference_measure_blue ().">sys_reference_measure_pink</a>();
<a name="l00490"></a>00490 <span class="keywordtype">void</span>    <a class="code" href="system_8c.html#ae77d91f8801da390b9dec1e4a740d85" title="See sys_reference_measure_blue ().">sys_reference_measure_purple</a>();
<a name="l00491"></a>00491 <span class="keywordtype">void</span>    <a class="code" href="system_8c.html#10b0d9845d6c021370b0d06a5a876205" title="Initiates to restore the color reference values.">sys_reference_measure_restore</a>();
<a name="l00492"></a>00492 
<a name="l00493"></a>00493 <span class="keywordtype">void</span>    <a class="code" href="system_8c.html#5ac3b5cf6f06e3ff4d3c745f9d5c693a" title="Set the operating speed of the sorter to the current demand value.">sys_set_speed</a>();
<a name="l00494"></a>00494 <span class="keywordtype">void</span>    <a class="code" href="system_8c.html#1826940cb85dc745f43b80c8554b3047" title="Set the operating speed of the sorter up by decreasing pause times.">sys_speed_up</a>();
<a name="l00495"></a>00495 <span class="keywordtype">void</span>    <a class="code" href="system_8c.html#86167f37ad40f4c37766d17c9d07845d" title="Set the operating speed of the sorter down by increasing pause times.">sys_speed_down</a> ();  
<a name="l00496"></a>00496 <span class="keywordtype">void</span>    <a class="code" href="system_8c.html#4fdb3cc2b07ea1f4534bc1c3ac60a865" title="Initiate a color measurement with the tcs color sensor.">sys_measure_tcs</a>();
<a name="l00497"></a>00497 <span class="keywordtype">void</span>    <a class="code" href="system_8c.html#0f47aa3043bc1362fbe37d003acfaf4e" title="Initiate a color measurement with the adjd color sensor.">sys_measure_adjd</a>();
<a name="l00498"></a>00498 <span class="keywordtype">void</span>    sys_wait(uint16_t time);
<a name="l00499"></a>00499 
<a name="l00500"></a>00500 <span class="keywordtype">void</span>    <a class="code" href="system_8c.html#b2694695c165d073dd47850b83904682" title="Initiates the color detection by the ADJD color sensor.">sensor_adjd_get_color</a>();
<a name="l00501"></a>00501 <span class="keywordtype">void</span>    <a class="code" href="system_8c.html#895d4e598ce146273eb5dc50e5a140ea" title="Initiates the color detection by the TCS color sensor.">sensor_tcs_get_color</a>();
<a name="l00502"></a>00502 <span class="keywordtype">void</span>    <a class="code" href="system_8c.html#97b11d5bfac2abcab58401879440e202" title="Rotates the catcher to a certain position.">catcher_rotate_absolute</a>(smartie_color move_to);
<a name="l00503"></a>00503 <span class="keywordtype">void</span>    <a class="code" href="system_8c.html#2c5ecc52ef42cf3086da340a8e3eae13" title="Rotates the catcher from the current position to a relative next position regarding...">catcher_rotate_relative</a>(int8_t);
<a name="l00504"></a>00504 <span class="keywordtype">void</span>    <a class="code" href="system_8c.html#4312b8582a99de2443c53adce9359dc5" title="Rotates the revolver from the current position to a relative next position regarding...">revolver_rotate_relative</a>(int8_t rel_pos);
<a name="l00505"></a>00505 <span class="keywordtype">void</span>    <a class="code" href="system_8c.html#ef389e924ee5fb5cb82da6c6a11209b5" title="Initiates the vibrator to start.">vibrator_start</a>();
<a name="l00506"></a>00506 
<a name="l00507"></a>00507 smartie_color make_color_merge(smartie_color color1, smartie_color color2);
<a name="l00508"></a>00508 
<a name="l00509"></a>00509 <span class="preprocessor">#endif </span><span class="comment">/*SYSTEM_H_*/</span>
</pre></div></div>
<hr size="1"><address style="text-align: right;"><small>Generated on Fri Aug 29 13:48:09 2008 for Smarties2 by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.5 </small></address>
</body>
</html>
