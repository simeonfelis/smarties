<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>Smarties2: system.c File Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.5 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="classes.html"><span>Data&nbsp;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    <li>
      <form action="search.php" method="get">
        <table cellspacing="0" cellpadding="0" border="0">
          <tr>
            <td><label>&nbsp;<u>S</u>earch&nbsp;for&nbsp;</label></td>
            <td><input type="text" name="query" value="" size="20" accesskey="s"/></td>
          </tr>
        </table>
      </form>
    </li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>system.c File Reference</h1>Short routines for controlling the whole system and modules. <a href="#_details">More...</a>
<p>
<code>#include &lt;avr/eeprom.h&gt;</code><br>
<code>#include &quot;<a class="el" href="system_8h-source.html">system.h</a>&quot;</code><br>
<code>#include &quot;<a class="el" href="menu_8h-source.html">menu.h</a>&quot;</code><br>

<p>
<div class="dynheader">
Include dependency graph for system.c:</div>
<div class="dynsection">
<p><center><img src="system_8c__incl.png" border="0" usemap="#system.c_map" alt=""></center>
<map name="system.c_map">
<area shape="rect" href="system_8h.html" title="Smarites machine API header file." alt="" coords="125,80,200,107"><area shape="rect" href="menu_8h.html" title="The menu structure and handling." alt="" coords="224,80,288,107"></map>
</div>

<p>
<a href="system_8c-source.html">Go to the source code of this file.</a><table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="system_8c.html#fcc5a33541d29a2d114643e67b7a5e68">sys_enter_topmenu</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Will set the current menu to the upper menu layer.  <a href="#fcc5a33541d29a2d114643e67b7a5e68"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="system_8c.html#5e456b56f0c2ce2d53923272af0ad333">sys_enter_submenu</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Will set the current menu to to lower menu layer.  <a href="#5e456b56f0c2ce2d53923272af0ad333"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="system_8c.html#e2936ed52c758b103718c0101d5133df">sys_catcher_disable</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Diables (power off) the catcher stepper motor.  <a href="#e2936ed52c758b103718c0101d5133df"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="system_8c.html#a740aed754b50165fb058dad9713f2f8">sys_catcher_enable</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Enables (power on) the catcher stepper motor.  <a href="#a740aed754b50165fb058dad9713f2f8"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="c8a68f0c5c371bc0f41e3ff4655eb9fa"></a><!-- doxytag: member="system.c::sys_catcher_move_step" ref="c8a68f0c5c371bc0f41e3ff4655eb9fa" args="()" -->
void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="system_8c.html#c8a68f0c5c371bc0f41e3ff4655eb9fa">sys_catcher_move_step</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Moves the catcher stepper motor for on step. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="system_8c.html#75278bd6ede508871b8d7880f24503d8">sys_catcher_rotate</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Rotates the catcher for one position.  <a href="#75278bd6ede508871b8d7880f24503d8"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">uint8_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="system_8c.html#03ea663e9ae339039bc5cbcddee52d94">sys_get_out_pos</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Gets the correct out index of the next to drop smartie.  <a href="#03ea663e9ae339039bc5cbcddee52d94"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int8_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="system_8c.html#60124c61aa7941fb311fdb4d85e6ba66">sys_catcher_is_lb_blocked</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Returns status for the catcher lightbarrier.  <a href="#60124c61aa7941fb311fdb4d85e6ba66"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="system_8c.html#9fcb8a68acbcbb5ab57ca0ea752b5ad6">sys_revolver_rotate</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Rotates the revolver for one position.  <a href="#9fcb8a68acbcbb5ab57ca0ea752b5ad6"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="f98b8357b55993121effd5f8a144db21"></a><!-- doxytag: member="system.c::sys_revolver_move_step" ref="f98b8357b55993121effd5f8a144db21" args="()" -->
void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="system_8c.html#f98b8357b55993121effd5f8a144db21">sys_revolver_move_step</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Moves the revolver for one step. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int8_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="system_8c.html#768659fc9adb5f8edca3aed8711ef448">sys_revolver_is_lb_blocked</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Returns the status for the revolver lightbarrier.  <a href="#768659fc9adb5f8edca3aed8711ef448"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="system_8c.html#851876925adec6a4c6d7cb6aec4bbbfd">sys_pause</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Will Enter the pause mode.  <a href="#851876925adec6a4c6d7cb6aec4bbbfd"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="system_8c.html#6d65cab872ca8f9d37af4287ee012740">sys_reference_measure_blue</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Initiates color callibration for corresponding smartie color.  <a href="#6d65cab872ca8f9d37af4287ee012740"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="4ff06646314a1ccaf1947c9986c2486d"></a><!-- doxytag: member="system.c::sys_reference_measure_green" ref="4ff06646314a1ccaf1947c9986c2486d" args="()" -->
void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="system_8c.html#4ff06646314a1ccaf1947c9986c2486d">sys_reference_measure_green</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">See <a class="el" href="system_8h.html#6d65cab872ca8f9d37af4287ee012740">sys_reference_measure_blue</a> (). <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="1ca664e0f0800b98f4e3cbb6295429ee"></a><!-- doxytag: member="system.c::sys_reference_measure_red" ref="1ca664e0f0800b98f4e3cbb6295429ee" args="()" -->
void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="system_8c.html#1ca664e0f0800b98f4e3cbb6295429ee">sys_reference_measure_red</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">See <a class="el" href="system_8h.html#6d65cab872ca8f9d37af4287ee012740">sys_reference_measure_blue</a> (). <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="4dfe8d9daa9b136d3c7b5eb0c7d54489"></a><!-- doxytag: member="system.c::sys_reference_measure_yellow" ref="4dfe8d9daa9b136d3c7b5eb0c7d54489" args="()" -->
void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="system_8c.html#4dfe8d9daa9b136d3c7b5eb0c7d54489">sys_reference_measure_yellow</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">See <a class="el" href="system_8h.html#6d65cab872ca8f9d37af4287ee012740">sys_reference_measure_blue</a> (). <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="430fcc5c084c5d195784456a4b0241fe"></a><!-- doxytag: member="system.c::sys_reference_measure_orange" ref="430fcc5c084c5d195784456a4b0241fe" args="()" -->
void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="system_8c.html#430fcc5c084c5d195784456a4b0241fe">sys_reference_measure_orange</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">See <a class="el" href="system_8h.html#6d65cab872ca8f9d37af4287ee012740">sys_reference_measure_blue</a> (). <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="5ede569de5e4adae83654eadf689319d"></a><!-- doxytag: member="system.c::sys_reference_measure_brown" ref="5ede569de5e4adae83654eadf689319d" args="()" -->
void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="system_8c.html#5ede569de5e4adae83654eadf689319d">sys_reference_measure_brown</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">See <a class="el" href="system_8h.html#6d65cab872ca8f9d37af4287ee012740">sys_reference_measure_blue</a> (). <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="ae77d91f8801da390b9dec1e4a740d85"></a><!-- doxytag: member="system.c::sys_reference_measure_purple" ref="ae77d91f8801da390b9dec1e4a740d85" args="()" -->
void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="system_8c.html#ae77d91f8801da390b9dec1e4a740d85">sys_reference_measure_purple</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">See <a class="el" href="system_8h.html#6d65cab872ca8f9d37af4287ee012740">sys_reference_measure_blue</a> (). <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="30d1084c81b5ad36c00bb9ee8fe9ac13"></a><!-- doxytag: member="system.c::sys_reference_measure_pink" ref="30d1084c81b5ad36c00bb9ee8fe9ac13" args="()" -->
void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="system_8c.html#30d1084c81b5ad36c00bb9ee8fe9ac13">sys_reference_measure_pink</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">See <a class="el" href="system_8h.html#6d65cab872ca8f9d37af4287ee012740">sys_reference_measure_blue</a> (). <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="system_8c.html#10b0d9845d6c021370b0d06a5a876205">sys_reference_measure_restore</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Initiates to restore the color reference values.  <a href="#10b0d9845d6c021370b0d06a5a876205"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="system_8c.html#73eeab714172d1723e3d412f36002a9b">sys_resume</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Leave the pause mode.  <a href="#73eeab714172d1723e3d412f36002a9b"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="5ac3b5cf6f06e3ff4d3c745f9d5c693a"></a><!-- doxytag: member="system.c::sys_set_speed" ref="5ac3b5cf6f06e3ff4d3c745f9d5c693a" args="()" -->
void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="system_8c.html#5ac3b5cf6f06e3ff4d3c745f9d5c693a">sys_set_speed</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Set the operating speed of the sorter to the current demand value. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="system_8c.html#1826940cb85dc745f43b80c8554b3047">sys_speed_up</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Set the operating speed of the sorter up by decreasing pause times.  <a href="#1826940cb85dc745f43b80c8554b3047"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="system_8c.html#86167f37ad40f4c37766d17c9d07845d">sys_speed_down</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Set the operating speed of the sorter down by increasing pause times.  <a href="#86167f37ad40f4c37766d17c9d07845d"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="4fdb3cc2b07ea1f4534bc1c3ac60a865"></a><!-- doxytag: member="system.c::sys_measure_tcs" ref="4fdb3cc2b07ea1f4534bc1c3ac60a865" args="()" -->
void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="system_8c.html#4fdb3cc2b07ea1f4534bc1c3ac60a865">sys_measure_tcs</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Initiate a color measurement with the tcs color sensor. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="0f47aa3043bc1362fbe37d003acfaf4e"></a><!-- doxytag: member="system.c::sys_measure_adjd" ref="0f47aa3043bc1362fbe37d003acfaf4e" args="()" -->
void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="system_8c.html#0f47aa3043bc1362fbe37d003acfaf4e">sys_measure_adjd</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Initiate a color measurement with the adjd color sensor. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="ef389e924ee5fb5cb82da6c6a11209b5"></a><!-- doxytag: member="system.c::vibrator_start" ref="ef389e924ee5fb5cb82da6c6a11209b5" args="()" -->
void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="system_8c.html#ef389e924ee5fb5cb82da6c6a11209b5">vibrator_start</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Initiates the vibrator to start. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="b2694695c165d073dd47850b83904682"></a><!-- doxytag: member="system.c::sensor_adjd_get_color" ref="b2694695c165d073dd47850b83904682" args="()" -->
void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="system_8c.html#b2694695c165d073dd47850b83904682">sensor_adjd_get_color</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Initiates the color detection by the ADJD color sensor. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="895d4e598ce146273eb5dc50e5a140ea"></a><!-- doxytag: member="system.c::sensor_tcs_get_color" ref="895d4e598ce146273eb5dc50e5a140ea" args="()" -->
void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="system_8c.html#895d4e598ce146273eb5dc50e5a140ea">sensor_tcs_get_color</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Initiates the color detection by the TCS color sensor. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="system_8c.html#97b11d5bfac2abcab58401879440e202">catcher_rotate_absolute</a> (smartie_color move_to)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Rotates the catcher to a certain position.  <a href="#97b11d5bfac2abcab58401879440e202"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="system_8c.html#2c5ecc52ef42cf3086da340a8e3eae13">catcher_rotate_relative</a> (int8_t rel_pos)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Rotates the catcher from the current position to a relative next position regarding 'hole above hole'.  <a href="#2c5ecc52ef42cf3086da340a8e3eae13"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="system_8c.html#4312b8582a99de2443c53adce9359dc5">revolver_rotate_relative</a> (int8_t rel_pos)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Rotates the revolver from the current position to a relative next position regarding 'hole above hole'.  <a href="#4312b8582a99de2443c53adce9359dc5"></a><br></td></tr>
</table>
<hr><a name="_details"></a><h2>Detailed Description</h2>
Short routines for controlling the whole system and modules. 
<p>

<p>Definition in file <a class="el" href="system_8c-source.html">system.c</a>.</p>
<hr><h2>Function Documentation</h2>
<a class="anchor" name="97b11d5bfac2abcab58401879440e202"></a><!-- doxytag: member="system.c::catcher_rotate_absolute" ref="97b11d5bfac2abcab58401879440e202" args="(smartie_color move_to)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void catcher_rotate_absolute           </td>
          <td>(</td>
          <td class="paramtype">smartie_color&nbsp;</td>
          <td class="paramname"> <em>move_to</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Rotates the catcher to a certain position. 
<p>
This function will rotate the catcher to position specified by the a color <a class="el" href="system_8h.html#7b19b2744b17f8f369226dd73101a4b2">smartie_color_t</a>. 
<p>Definition at line <a class="el" href="system_8c-source.html#l00346">346</a> of file <a class="el" href="system_8c-source.html">system.c</a>.</p>

<p>References <a class="el" href="system_8h-source.html#l00190">CATCH_MAX_SIZE</a>, <a class="el" href="system_8c-source.html#l00384">catcher_rotate_relative()</a>, <a class="el" href="system_8h-source.html#l00338">col_unknown</a>, <a class="el" href="system_8h-source.html#l00375">stepper_motor_t::current_pos</a>, <a class="el" href="system_8h-source.html#l00444">smartie_sorter_t::mot_catcher</a>, <a class="el" href="system_8h-source.html#l00257">stat_finished</a>, and <a class="el" href="system_8h-source.html#l00374">stepper_motor_t::status_last</a>.</p>

<p>Referenced by <a class="el" href="smarties2_8c-source.html#l00221">main()</a>.</p>

</div>
</div><p>
<a class="anchor" name="2c5ecc52ef42cf3086da340a8e3eae13"></a><!-- doxytag: member="system.c::catcher_rotate_relative" ref="2c5ecc52ef42cf3086da340a8e3eae13" args="(int8_t rel_pos)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void catcher_rotate_relative           </td>
          <td>(</td>
          <td class="paramtype">int8_t&nbsp;</td>
          <td class="paramname"> <em>rel_pos</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Rotates the catcher from the current position to a relative next position regarding 'hole above hole'. 
<p>
Most of the work is being done in <a class="el" href="abstraction_8c.html#b45f6a6990e7755a39cc6279e3c09abf">motor_stuff</a>.<p>
Warning: This function does not check if the catcher is already working. Before calling this function, check if the motor's status and last status equals <a class="el" href="system_8h.html#6bfb87db0720ecda67ba06ab52162b035ad840e3bfeb7a8c1633431f009ec7fc">stat_idle</a>. It also doesn't check the parameter, if the value is reasonable.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>rel_pos</em>&nbsp;</td><td>The position where to move to. The value of rel_pos will be not checked, so the value must be lower than <a class="el" href="system_8h.html#388331d885423f07d4a701af481c62a7">REV_MAX_SIZE</a> or <a class="el" href="system_8h.html#ebeee5d587e924ad6d94000c311f24af">CATCH_MAX_SIZE</a>. </td></tr>
  </table>
</dl>

<p>Definition at line <a class="el" href="system_8c-source.html#l00384">384</a> of file <a class="el" href="system_8c-source.html">system.c</a>.</p>

<p>References <a class="el" href="system_8h-source.html#l00190">CATCH_MAX_SIZE</a>, <a class="el" href="system_8h-source.html#l00375">stepper_motor_t::current_pos</a>, <a class="el" href="system_8h-source.html#l00444">smartie_sorter_t::mot_catcher</a>, <a class="el" href="system_8h-source.html#l00257">stat_finished</a>, <a class="el" href="system_8h-source.html#l00254">stat_start_working</a>, <a class="el" href="system_8h-source.html#l00373">stepper_motor_t::status</a>, <a class="el" href="system_8h-source.html#l00374">stepper_motor_t::status_last</a>, and <a class="el" href="system_8h-source.html#l00376">stepper_motor_t::target_pos</a>.</p>

<p>Referenced by <a class="el" href="system_8c-source.html#l00346">catcher_rotate_absolute()</a>, <a class="el" href="inits_8c-source.html#l00163">init_motors()</a>, and <a class="el" href="system_8c-source.html#l00072">sys_catcher_rotate()</a>.</p>

</div>
</div><p>
<a class="anchor" name="4312b8582a99de2443c53adce9359dc5"></a><!-- doxytag: member="system.c::revolver_rotate_relative" ref="4312b8582a99de2443c53adce9359dc5" args="(int8_t rel_pos)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void revolver_rotate_relative           </td>
          <td>(</td>
          <td class="paramtype">int8_t&nbsp;</td>
          <td class="paramname"> <em>rel_pos</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Rotates the revolver from the current position to a relative next position regarding 'hole above hole'. 
<p>
Most of the work is being done in <a class="el" href="abstraction_8c.html#b45f6a6990e7755a39cc6279e3c09abf">motor_stuff</a>.<p>
Warning: This function does not check if the revolver is already working. Before calling this function, check if the motor's status and last status equals <a class="el" href="system_8h.html#6bfb87db0720ecda67ba06ab52162b035ad840e3bfeb7a8c1633431f009ec7fc">stat_idle</a>. It also doesn't check the parameter, if the value is reasonable.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>rel_pos</em>&nbsp;</td><td>The position where to move to. The value of rel_pos will be not checked, so the value must be lower than <a class="el" href="system_8h.html#388331d885423f07d4a701af481c62a7">REV_MAX_SIZE</a> or <a class="el" href="system_8h.html#ebeee5d587e924ad6d94000c311f24af">CATCH_MAX_SIZE</a>. </td></tr>
  </table>
</dl>

<p>Definition at line <a class="el" href="system_8c-source.html#l00415">415</a> of file <a class="el" href="system_8c-source.html">system.c</a>.</p>

<p>References <a class="el" href="system_8h-source.html#l00375">stepper_motor_t::current_pos</a>, <a class="el" href="system_8h-source.html#l00445">smartie_sorter_t::mot_revolver</a>, <a class="el" href="system_8h-source.html#l00161">REV_MAX_SIZE</a>, <a class="el" href="system_8h-source.html#l00257">stat_finished</a>, <a class="el" href="system_8h-source.html#l00254">stat_start_working</a>, <a class="el" href="system_8h-source.html#l00373">stepper_motor_t::status</a>, <a class="el" href="system_8h-source.html#l00374">stepper_motor_t::status_last</a>, and <a class="el" href="system_8h-source.html#l00376">stepper_motor_t::target_pos</a>.</p>

<p>Referenced by <a class="el" href="inits_8c-source.html#l00163">init_motors()</a>, <a class="el" href="smarties2_8c-source.html#l00221">main()</a>, and <a class="el" href="system_8c-source.html#l00118">sys_revolver_rotate()</a>.</p>

</div>
</div><p>
<a class="anchor" name="e2936ed52c758b103718c0101d5133df"></a><!-- doxytag: member="system.c::sys_catcher_disable" ref="e2936ed52c758b103718c0101d5133df" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void sys_catcher_disable           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Diables (power off) the catcher stepper motor. 
<p>
This function is prepared especially for functions started from the menu. This function works only if the menu is correct initialized. 
<p>Definition at line <a class="el" href="system_8c-source.html#l00044">44</a> of file <a class="el" href="system_8c-source.html">system.c</a>.</p>

<p>References <a class="el" href="system_8h-source.html#l00184">CATCH_DISABLE</a>.</p>

<p>Referenced by <a class="el" href="inits_8c-source.html#l00163">init_motors()</a>.</p>

</div>
</div><p>
<a class="anchor" name="a740aed754b50165fb058dad9713f2f8"></a><!-- doxytag: member="system.c::sys_catcher_enable" ref="a740aed754b50165fb058dad9713f2f8" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void sys_catcher_enable           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Enables (power on) the catcher stepper motor. 
<p>
This function is prepared especially for functions started from the menu. This function works only if the menu is correct initialized. 
<p>Definition at line <a class="el" href="system_8c-source.html#l00054">54</a> of file <a class="el" href="system_8c-source.html">system.c</a>.</p>

<p>References <a class="el" href="system_8h-source.html#l00183">CATCH_ENABLE</a>.</p>

<p>Referenced by <a class="el" href="inits_8c-source.html#l00163">init_motors()</a>.</p>

</div>
</div><p>
<a class="anchor" name="60124c61aa7941fb311fdb4d85e6ba66"></a><!-- doxytag: member="system.c::sys_catcher_is_lb_blocked" ref="60124c61aa7941fb311fdb4d85e6ba66" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int8_t sys_catcher_is_lb_blocked           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Returns status for the catcher lightbarrier. 
<p>
This function is prepared especially for functions started from the menu. This function works only if the menu is correct initialized. 
<p>Definition at line <a class="el" href="system_8c-source.html#l00098">98</a> of file <a class="el" href="system_8c-source.html">system.c</a>.</p>

<p>References <a class="el" href="system_8h-source.html#l00233">IS_LB_CATCHER</a>.</p>

<p>Referenced by <a class="el" href="inits_8c-source.html#l00163">init_motors()</a>.</p>

</div>
</div><p>
<a class="anchor" name="75278bd6ede508871b8d7880f24503d8"></a><!-- doxytag: member="system.c::sys_catcher_rotate" ref="75278bd6ede508871b8d7880f24503d8" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void sys_catcher_rotate           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Rotates the catcher for one position. 
<p>
This function is intened for manual usage and should not be used during normal running mode <a class="el" href="system_8h.html#6e4cea4b6246f491c526211f5405627d564529220e61e848983d8eb9d7f87736">SYS_MODE_RUNNING</a>, only during <a class="el" href="system_8h.html#6e4cea4b6246f491c526211f5405627df1c8a041b6d3d46002d02ed0645a8ba2">SYS_MODE_PAUSE</a>. 
<p>Definition at line <a class="el" href="system_8c-source.html#l00072">72</a> of file <a class="el" href="system_8c-source.html">system.c</a>.</p>

<p>References <a class="el" href="system_8c-source.html#l00384">catcher_rotate_relative()</a>, <a class="el" href="system_8h-source.html#l00444">smartie_sorter_t::mot_catcher</a>, <a class="el" href="system_8h-source.html#l00441">smartie_sorter_t::prog</a>, <a class="el" href="system_8h-source.html#l00283">prog_rotate_catcher</a>, <a class="el" href="system_8h-source.html#l00253">stat_idle</a>, <a class="el" href="system_8h-source.html#l00373">stepper_motor_t::status</a>, and <a class="el" href="system_8h-source.html#l00374">stepper_motor_t::status_last</a>.</p>

<p>Referenced by <a class="el" href="inits_8c-source.html#l00228">init_menu()</a>.</p>

</div>
</div><p>
<a class="anchor" name="5e456b56f0c2ce2d53923272af0ad333"></a><!-- doxytag: member="system.c::sys_enter_submenu" ref="5e456b56f0c2ce2d53923272af0ad333" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void sys_enter_submenu           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Will set the current menu to to lower menu layer. 
<p>
This function is prepared especially for functions started from the menu. This function works only if the menu is correct initialized. 
<p>Definition at line <a class="el" href="system_8c-source.html#l00033">33</a> of file <a class="el" href="system_8c-source.html">system.c</a>.</p>

<p>References <a class="el" href="system_8h-source.html#l00441">smartie_sorter_t::prog</a>, <a class="el" href="system_8h-source.html#l00282">prog_none</a>, and <a class="el" href="menu_8h-source.html#l00185">menu_entry_t::submenu</a>.</p>

<p>Referenced by <a class="el" href="inits_8c-source.html#l00228">init_menu()</a>.</p>

</div>
</div><p>
<a class="anchor" name="fcc5a33541d29a2d114643e67b7a5e68"></a><!-- doxytag: member="system.c::sys_enter_topmenu" ref="fcc5a33541d29a2d114643e67b7a5e68" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void sys_enter_topmenu           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Will set the current menu to the upper menu layer. 
<p>
This function is prepared especially for functions started from the menu. This function works only if the menu is correct initialized. 
<p>Definition at line <a class="el" href="system_8c-source.html#l00022">22</a> of file <a class="el" href="system_8c-source.html">system.c</a>.</p>

<p>References <a class="el" href="system_8h-source.html#l00441">smartie_sorter_t::prog</a>, <a class="el" href="system_8h-source.html#l00282">prog_none</a>, and <a class="el" href="menu_8h-source.html#l00184">menu_entry_t::topmenu</a>.</p>

<p>Referenced by <a class="el" href="inits_8c-source.html#l00228">init_menu()</a>.</p>

</div>
</div><p>
<a class="anchor" name="03ea663e9ae339039bc5cbcddee52d94"></a><!-- doxytag: member="system.c::sys_get_out_pos" ref="03ea663e9ae339039bc5cbcddee52d94" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t sys_get_out_pos           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Gets the correct out index of the next to drop smartie. 
<p>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>The index of smartie in the revolver which will be dropped next </dd></dl>

<p>Definition at line <a class="el" href="system_8c-source.html#l00085">85</a> of file <a class="el" href="system_8c-source.html">system.c</a>.</p>

<p>References <a class="el" href="system_8h-source.html#l00375">stepper_motor_t::current_pos</a>, <a class="el" href="system_8h-source.html#l00445">smartie_sorter_t::mot_revolver</a>, and <a class="el" href="system_8h-source.html#l00161">REV_MAX_SIZE</a>.</p>

<p>Referenced by <a class="el" href="smarties2_8c-source.html#l00221">main()</a>.</p>

</div>
</div><p>
<a class="anchor" name="851876925adec6a4c6d7cb6aec4bbbfd"></a><!-- doxytag: member="system.c::sys_pause" ref="851876925adec6a4c6d7cb6aec4bbbfd" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void sys_pause           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Will Enter the pause mode. 
<p>
This function will enter the pause mode after the current function is finished. This function is usually called from the lcd menu. This function is only available in the mode <a class="el" href="system_8h.html#6e4cea4b6246f491c526211f5405627d564529220e61e848983d8eb9d7f87736">SYS_MODE_RUNNING</a> 
<p>Definition at line <a class="el" href="system_8c-source.html#l00149">149</a> of file <a class="el" href="system_8c-source.html">system.c</a>.</p>

<p>References <a class="el" href="system_8h-source.html#l00273">system_state_t::mode</a>, <a class="el" href="system_8h-source.html#l00274">system_state_t::mode_last</a>, <a class="el" href="system_8h-source.html#l00440">smartie_sorter_t::state</a>, and <a class="el" href="system_8h-source.html#l00241">SYS_MODE_PAUSE</a>.</p>

<p>Referenced by <a class="el" href="inits_8c-source.html#l00228">init_menu()</a>.</p>

</div>
</div><p>
<a class="anchor" name="6d65cab872ca8f9d37af4287ee012740"></a><!-- doxytag: member="system.c::sys_reference_measure_blue" ref="6d65cab872ca8f9d37af4287ee012740" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void sys_reference_measure_blue           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Initiates color callibration for corresponding smartie color. 
<p>
This function is prepared especially for functions started from the menu. This function works only if the menu is correct initialized. 
<p>Definition at line <a class="el" href="system_8c-source.html#l00163">163</a> of file <a class="el" href="system_8c-source.html">system.c</a>.</p>

<p>References <a class="el" href="system_8h-source.html#l00441">smartie_sorter_t::prog</a>, and <a class="el" href="system_8h-source.html#l00287">prog_set_colors_blue</a>.</p>

<p>Referenced by <a class="el" href="inits_8c-source.html#l00228">init_menu()</a>.</p>

</div>
</div><p>
<a class="anchor" name="10b0d9845d6c021370b0d06a5a876205"></a><!-- doxytag: member="system.c::sys_reference_measure_restore" ref="10b0d9845d6c021370b0d06a5a876205" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void sys_reference_measure_restore           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Initiates to restore the color reference values. 
<p>
This function is prepared especially for functions started from the menu. This function works only if the menu is correct initialized. 
<p>Definition at line <a class="el" href="system_8c-source.html#l00222">222</a> of file <a class="el" href="system_8c-source.html">system.c</a>.</p>

<p>References <a class="el" href="system_8h-source.html#l00441">smartie_sorter_t::prog</a>, and <a class="el" href="system_8h-source.html#l00295">prog_set_colors_restore</a>.</p>

<p>Referenced by <a class="el" href="inits_8c-source.html#l00228">init_menu()</a>.</p>

</div>
</div><p>
<a class="anchor" name="73eeab714172d1723e3d412f36002a9b"></a><!-- doxytag: member="system.c::sys_resume" ref="73eeab714172d1723e3d412f36002a9b" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void sys_resume           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Leave the pause mode. 
<p>
This function will leave the pause mode. This function is usually called from the lcd menu. This function is only available in the mode <a class="el" href="system_8h.html#6e4cea4b6246f491c526211f5405627df1c8a041b6d3d46002d02ed0645a8ba2">SYS_MODE_PAUSE</a> 
<p>Definition at line <a class="el" href="system_8c-source.html#l00233">233</a> of file <a class="el" href="system_8c-source.html">system.c</a>.</p>

<p>References <a class="el" href="system_8h-source.html#l00273">system_state_t::mode</a>, <a class="el" href="system_8h-source.html#l00274">system_state_t::mode_last</a>, <a class="el" href="system_8h-source.html#l00440">smartie_sorter_t::state</a>, and <a class="el" href="system_8h-source.html#l00242">SYS_MODE_RUNNING</a>.</p>

<p>Referenced by <a class="el" href="inits_8c-source.html#l00228">init_menu()</a>.</p>

</div>
</div><p>
<a class="anchor" name="768659fc9adb5f8edca3aed8711ef448"></a><!-- doxytag: member="system.c::sys_revolver_is_lb_blocked" ref="768659fc9adb5f8edca3aed8711ef448" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int8_t sys_revolver_is_lb_blocked           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Returns the status for the revolver lightbarrier. 
<p>
This function is prepared especially for functions started from the menu. This function works only if the menu is correct initialized. 
<p>Definition at line <a class="el" href="system_8c-source.html#l00138">138</a> of file <a class="el" href="system_8c-source.html">system.c</a>.</p>

<p>References <a class="el" href="system_8h-source.html#l00234">IS_LB_REVOLVER</a>.</p>

<p>Referenced by <a class="el" href="inits_8c-source.html#l00163">init_motors()</a>.</p>

</div>
</div><p>
<a class="anchor" name="9fcb8a68acbcbb5ab57ca0ea752b5ad6"></a><!-- doxytag: member="system.c::sys_revolver_rotate" ref="9fcb8a68acbcbb5ab57ca0ea752b5ad6" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void sys_revolver_rotate           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Rotates the revolver for one position. 
<p>
This function is intened for manual usage and should not be used during normal running mode <a class="el" href="system_8h.html#6e4cea4b6246f491c526211f5405627d564529220e61e848983d8eb9d7f87736">SYS_MODE_RUNNING</a>, only during <a class="el" href="system_8h.html#6e4cea4b6246f491c526211f5405627df1c8a041b6d3d46002d02ed0645a8ba2">SYS_MODE_PAUSE</a>. 
<p>Definition at line <a class="el" href="system_8c-source.html#l00118">118</a> of file <a class="el" href="system_8c-source.html">system.c</a>.</p>

<p>References <a class="el" href="system_8h-source.html#l00445">smartie_sorter_t::mot_revolver</a>, <a class="el" href="system_8h-source.html#l00441">smartie_sorter_t::prog</a>, <a class="el" href="system_8h-source.html#l00284">prog_rotate_revolver</a>, <a class="el" href="system_8c-source.html#l00415">revolver_rotate_relative()</a>, <a class="el" href="system_8h-source.html#l00253">stat_idle</a>, <a class="el" href="system_8h-source.html#l00373">stepper_motor_t::status</a>, and <a class="el" href="system_8h-source.html#l00374">stepper_motor_t::status_last</a>.</p>

<p>Referenced by <a class="el" href="inits_8c-source.html#l00228">init_menu()</a>.</p>

</div>
</div><p>
<a class="anchor" name="86167f37ad40f4c37766d17c9d07845d"></a><!-- doxytag: member="system.c::sys_speed_down" ref="86167f37ad40f4c37766d17c9d07845d" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void sys_speed_down           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Set the operating speed of the sorter down by increasing pause times. 
<p>
This function is prepared especially for functions started from the menu. This function works only if the menu is correct initialized. 
<p>Definition at line <a class="el" href="system_8c-source.html#l00269">269</a> of file <a class="el" href="system_8c-source.html">system.c</a>.</p>

<p>References <a class="el" href="system_8h-source.html#l00441">smartie_sorter_t::prog</a>, <a class="el" href="system_8h-source.html#l00451">smartie_sorter_t::speed</a>, and <a class="el" href="system_8c-source.html#l00244">sys_set_speed()</a>.</p>

<p>Referenced by <a class="el" href="inits_8c-source.html#l00228">init_menu()</a>.</p>

</div>
</div><p>
<a class="anchor" name="1826940cb85dc745f43b80c8554b3047"></a><!-- doxytag: member="system.c::sys_speed_up" ref="1826940cb85dc745f43b80c8554b3047" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void sys_speed_up           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Set the operating speed of the sorter up by decreasing pause times. 
<p>
This function is prepared especially for functions started from the menu. This function works only if the menu is correct initialized. 
<p>Definition at line <a class="el" href="system_8c-source.html#l00256">256</a> of file <a class="el" href="system_8c-source.html">system.c</a>.</p>

<p>References <a class="el" href="system_8h-source.html#l00441">smartie_sorter_t::prog</a>, <a class="el" href="system_8h-source.html#l00451">smartie_sorter_t::speed</a>, and <a class="el" href="system_8c-source.html#l00244">sys_set_speed()</a>.</p>

<p>Referenced by <a class="el" href="inits_8c-source.html#l00228">init_menu()</a>.</p>

</div>
</div><p>
</div>
<hr size="1"><address style="text-align: right;"><small>Generated on Fri Aug 29 13:48:09 2008 for Smarties2 by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.5 </small></address>
</body>
</html>
